(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{udv3:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),n=a.n(r),o=a("p46w"),i=a.n(o);function s(t,e,a,r,n,o,i){try{var s=t[o](i),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(r,n)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var o=t.apply(e,a);function i(t){s(o,r,n,i,c,"next",t)}function c(t){s(o,r,n,i,c,"throw",t)}i(void 0)}))}}var u={props:["guest","clear_cart","wholesaler_minimum_order_amount","guest_status","user_id","org_id","organization"],data:function(){return{cart:[],message:"",countFromDB:0}},computed:{cart_badge:function(){var t=0,e="";if(0!=(t=1==this.guest?this.cart.length:this.countFromDB))e=t;return e}},created:function(){if("guest-checkout"!=this.guest_status&&loadingOverlay().cancel(spinHandle),1==this.guest)"clearcart"==this.clear_cart?(this.cart=[],localStorage.setItem("cart",JSON.stringify(this.cart)),localStorage.setItem("cart_badge",this.cart.length),this.getCart()):this.getCart();else{var t=i.a.get("ff-org-id");if(this.organization)if(t!=this.org_id){console.log("if"),i.a.remove("ff-org-id"),i.a.remove("ff-org-name"),i.a.remove("ff-org-address");var e=new Date((new Date).getTime()+864e5);i.a.set("ff-org-id",this.organization.id,{expires:e}),i.a.set("ff-org-name",this.organization.org_name,{expires:e}),i.a.set("ff-org-address",this.organization.atr_address,{expires:e}),this.getCart2()}else console.log("else"),this.getCart2();else i.a.remove("ff-org-id"),i.a.remove("ff-org-name"),i.a.remove("ff-org-address")}},methods:{checkoutPage:function(){window.location.href="/products"},ifCartExpired:function(){var t=localStorage.getItem("cart_expiry");if(!t)return!0;var e=JSON.parse(t);return(new Date).getTime()>e},getCart:function(){var t=this;return c(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ifCartExpired()){e.next=9;break}return e.next=3,JSON.parse(localStorage.getItem("cart")||"null");case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:a=e.t0,t.cart=a,localStorage.setItem("cart_badge",t.cart.length);case 9:case"end":return e.stop()}}),e)})))()},getCart2:function(){var t=this;return c(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.a.get("ff-org-id"),axios.get("/cart/getUserCartCount/".concat(t.user_id,"/").concat(a)).then((function(e){t.countFromDB=e.data})).catch((function(t){console.error(t)}));case 2:case"end":return e.stop()}}),e)})))()},getCart3:function(t){var e=this;return c(n.a.mark((function a(){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:axios.get("/cart/getUserCartCount/".concat(e.user_id,"/").concat(t)).then((function(t){e.countFromDB=t.data})).catch((function(t){console.error(t)}));case 1:case"end":return a.stop()}}),a)})))()}},events:{updateCartBadge:function(t){this.message=t,this.getCart()},updateCartBadge2:function(t){this.message=t,this.getCart2()},updateCartBadge3:function(t){this.countFromDB=t},updateCartBadge4:function(t){this.getCart3(t)}}},f=a("KHd+"),g=Object(f.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item cart-item",on:{click:function(e){return t.checkoutPage()}}},[a("a",{staticClass:"nav-link",staticStyle:{padding:"0px"}},[a("i",{staticClass:"fas fa-cart-plus",staticStyle:{"font-size":"30px",color:"#339f25"}},[a("span",{staticClass:"badge badge-danger align-top",staticStyle:{"font-size":"10px"},attrs:{id:"sunfarm-badge-1"}},[t._v(t._s(t.cart_badge))])])])])}),[],!1,null,null,null);e.default=g.exports}}]);
//# sourceMappingURL=productCart.js.map