(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"/WIo":function(e,t,s){var r=s("W/JR");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(r,a);r.locals&&(e.exports=r.locals)},"6ge6":function(e,t,s){"use strict";var r=s("/WIo");s.n(r).a},"W/JR":function(e,t,s){(e.exports=s("I1BE")(!1)).push([e.i,".s-user-type .md-radio[data-v-42c969a5] {\n  display: flex;\n}\n.my-select[data-v-42c969a5] {\n  padding: 0px;\n  margin: 0px;\n  border-top: 0px;\n  border-left: 0px;\n  border-right: 0px;\n}",""])},Z223:function(e,t,s){"use strict";s.r(t);var r=s("o0o1"),a=s.n(r),i=s("pgaV"),n=s("e7F3"),o=s("TJPC");function l(e,t,s,r,a,i,n){try{var o=e[i](n),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,a){var i=e.apply(t,s);function n(e){l(i,r,a,n,o,"next",e)}function o(e){l(i,r,a,n,o,"throw",e)}n(void 0)}))}}function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object(n.c)("required",d(d({},o.c),{},{message:"This field is required"}));var v={props:["action","propsuser","propscities","propsstates","propssunclub_choices","wholesaler_discount","wholesaler_signup_is_hide"],data:function(){return{profileImage:"/img/sunfarmacy/default-user.png",businessImage:"/img/no-product-image.png",userType:"1",selectedAmount:"",billingType:"1",years:[],months:[],states:[],cities:[],selectedCity:"",selectedState:"",bstates:[],bcities:[],bselectedCity:"",bselectedState:"",user:{},sunclub_choices:[],cities2:[],newCity1:"",newCity2:"",membership_fee:{},errors:new i.a,ErrorMessage:[],address:{city:null,state:1456},timer:null,cities3:[],states2:[]}},watch:{selectedAmount:function(e){e&&(this.membership_fee=this.sunclub_choices.find((function(t){return t.id===e})))}},created:function(){this.selectedAmount=1,this.getStates(),this.user=this.propsuser,this.sunclub_choices=this.propssunclub_choices},computed:{getCities:function(){var e=this.propscities,t=this.selectedState;return e.filter((function(e){return e.state_id==t}))},bgetCities:function(){var e=this.propscities,t=this.bselectedState;return e.filter((function(e){return e.state_id==t}))}},methods:{fetchOptions:function(e,t){var s=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){s.getCities3(e)}),300)},getCities3:function(){var e=arguments,t=this;return c(a.a.mark((function s(){var r,i;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,i={search:r},s.next=4,axios({method:"get",url:"/data/searchcities",params:i}).then((function(e){t.cities3=e.data}));case 4:case"end":return s.stop()}}),s)})))()},submitButtonClicked:function(){this.ErrorMessage=[],this.$refs.invisibleRecaptcha2.execute()},recaptchaCallback:function(e){var t=this;LoadingOverlay();var s=this.action,r=document.getElementById("billingInfoForm"),a=new FormData(r);a.append("g-recaptcha-response",e),a.append("city",this.address.city),a.append("state",this.address.state),axios.post(s,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),window.scrollTo(0,0),window.location.href="/signup/complete"})).catch((function(e){if(422==e.response.status&&(t.errors.record(e.response.data.errors),t.ErrorMessage=t.errors.getArrayOfMessages(),window.scrollTo(0,0),LoadingOverlayHide()),400==e.response.status){var s=[];s.push(e.response.data.data_message),t.ErrorMessage=s,window.scrollTo(0,0),LoadingOverlayHide()}}))},close:function(){this.ErrorMessage=[]},getStates:function(){this.states=this.propsstates,this.states2=this.propsstates,this.bstates=this.propsstates},statesChange:function(){this.selectedCity={}},bstatesChange:function(){this.bselectedCity={}},onFileChange:function(e){console.log(e);var t=e.target.files[0];this.profileImage=URL.createObjectURL(t)},onFileChange2:function(e){console.log(e);var t=e.target.files[0];this.businessImage=URL.createObjectURL(t)},getCitiesForAutocomplete:function(e){var t=this;new Promise((function(s){window.setTimeout((function(){if(e){var r=e.toLowerCase();s(t.getCities2(r))}else t.getCities2()}),700)}))},getCities2:function(){var e=arguments,t=this;return c(a.a.mark((function s(){var r,i;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,i={search:r},s.next=4,axios({method:"get",url:"/data/searchcities",params:i}).then((function(e){t.cities2=e.data}));case 4:case"end":return s.stop()}}),s)})))()}},mounted:function(){for(var e=(new Date).getFullYear(),t=0;t<10;t++){var s=e+t,r=s.toString(),a={year:s,value:r=r.slice(-2)};this.years.push(a)}for(var i=1;i<=12;i++)this.months.push(i)}},p=(s("6ge6"),s("KHd+")),_=Object(p.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{attrs:{id:"billingInfoForm",name:"billingInfoForm",onsubmit:"return false"}},[s("div",{staticClass:"flex-grow-1"},[s("b-container",{staticClass:"py-5"},[s("div",{staticClass:"card-body"},[e.ErrorMessage.length>0?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(t){return e.close()}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])]),e._v(" "),e._l(e.ErrorMessage,(function(t,r){return s("div",{key:r},[e._v("\r\n                              "+e._s(t)+"\r\n                              "),s("br")])}))],2):e._e()]),e._v(" "),s("br"),e._v(" "),s("p",{staticClass:"font-weight-bold"},[e._v("\r\n        Your account has been confirmed. Please continue with to fill up\r\n        the required information to complete the registration.\r\n      ")]),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"8"}},[s("b-row",[s("b-col",{attrs:{md:"3"}},[s("img",{staticClass:"w-100",attrs:{src:e.profileImage}}),e._v(" "),s("md-field",[s("label",[e._v("Select image")]),e._v(" "),s("md-file",{attrs:{name:"image_file"},on:{change:e.onFileChange}})],1)],1),e._v(" "),s("b-col",[s("h4",{staticClass:"font-weight-bold"},[e._v("User Information")]),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"12"}},[s("md-field",[s("label",[e._v("Email")]),e._v(" "),s("md-input",{attrs:{disabled:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1)],1),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"2"}},[s("md-field",[s("label",[e._v("Title")]),e._v(" "),s("md-select",{attrs:{name:"title"}},[s("md-option",{attrs:{value:"Mr."}},[e._v("Mr.")]),e._v(" "),s("md-option",{attrs:{value:"Ms."}},[e._v("Ms.")]),e._v(" "),s("md-option",{attrs:{value:"Mrs."}},[e._v("Mrs.")])],1)],1)],1),e._v(" "),s("b-col",{attrs:{md:"5"}},[s("md-field",[s("label",[e._v("Firt name")]),e._v(" "),s("md-input",{attrs:{name:"first_name",required:""},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1)],1),e._v(" "),s("b-col",{attrs:{md:"5"}},[s("md-field",[s("label",[e._v("Last name")]),e._v(" "),s("md-input",{attrs:{name:"last_name",required:""},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1)],1)],1),e._v(" "),s("md-field",[s("label",[e._v("Street Address")]),e._v(" "),s("md-input",{attrs:{name:"street_address",required:""}})],1),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"4"}},[s("label",[e._v("Town/County/City")]),e._v(" "),s("v-select",{attrs:{options:e.cities3,multiple:!1,disabled:!1,clearable:!0,searchable:!0,filterable:!0,taggable:!0,"no-drop":!1,"push-tags":!0,"select-on-tab":!0},on:{search:e.fetchOptions},model:{value:e.address.city,callback:function(t){e.$set(e.address,"city",t)},expression:"address.city"}})],1),e._v(" "),s("b-col",{attrs:{md:"4"}},[s("label",[e._v("State")]),e._v(" "),s("v-select",{attrs:{label:"name",reduce:function(e){return e.id},options:e.states2,clearable:!1},model:{value:e.address.state,callback:function(t){e.$set(e.address,"state",t)},expression:"address.state"}})],1),e._v(" "),s("b-col",{attrs:{md:"4"}},[s("md-field",[s("label",[e._v("Zip")]),e._v(" "),s("md-input",{attrs:{name:"zipcode",required:""}})],1)],1)],1),e._v(" "),s("h4",{staticClass:"font-weight-bold"},[e._v("Billing Information")]),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"6"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Billing Type")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.billingType,expression:"billingType"}],staticClass:"form-control my-select",attrs:{name:"billing_token_type",required:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.billingType=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"1"}},[e._v("CC")]),e._v(" "),s("option",{attrs:{value:"2"}},[e._v("ACH")])])]),e._v(" "),"1"===e.billingType?s("b-col",{attrs:{md:"6"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Card Type")]),e._v(" "),s("select",{staticClass:"form-control my-select",attrs:{name:"card_type",required:""}},[s("option",{attrs:{value:"1"}},[e._v("American Express")]),e._v(" "),s("option",{attrs:{value:"2"}},[e._v("Discover")]),e._v(" "),s("option",{attrs:{value:"3"}},[e._v("Mastercard")]),e._v(" "),s("option",{attrs:{value:"4"}},[e._v("Visa")])])]):e._e(),e._v(" "),s("b-col",{attrs:{md:"6"}},["2"===e.billingType?s("b-col",{attrs:{md:"12"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Account Type")]),e._v(" "),s("select",{staticClass:"form-control my-select",attrs:{name:"ach_type",required:""}},[s("option",{attrs:{value:"1"}},[e._v("Savings")]),e._v(" "),s("option",{attrs:{value:"0"}},[e._v("Checking")])])]):e._e(),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),"2"===e.billingType?s("b-col",{attrs:{md:"12"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Account Holder Type")]),e._v(" "),s("select",{staticClass:"form-control my-select",attrs:{name:"ach_acc_holder_type",required:""}},[s("option",{attrs:{value:"0"}},[e._v("Personal")]),e._v(" "),s("option",{attrs:{value:"1"}},[e._v("Business")])])]):e._e()],1)],1),e._v(" "),"1"===e.billingType?s("div",[s("md-field",[s("label",[e._v("Name in the card")]),e._v(" "),s("md-input",{attrs:{name:"card_name"}})],1),e._v(" "),s("b-row",[s("b-col",[s("md-field",[s("label",[e._v("Credit Card Number")]),e._v(" "),s("md-input",{attrs:{name:"card_number",required:""}})],1)],1),e._v(" "),s("b-col",[s("md-field",[s("label",[e._v("Security Code")]),e._v(" "),s("md-input",{attrs:{type:"password",name:"cvv",required:""}})],1)],1)],1),e._v(" "),s("br"),e._v(" "),s("p",{staticClass:"m-0"},[e._v("Expiration Date")]),e._v(" "),s("br"),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"6"}},[s("b-row",[s("b-col",{attrs:{md:"6"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Month")]),e._v(" "),s("select",{staticClass:"form-control form-control-sm my-select",attrs:{name:"exp_month",required:""}},e._l(e.months,(function(t,r){return s("option",{key:r,domProps:{value:t}},[e._v(e._s(t))])})),0)]),e._v(" "),s("b-col",{attrs:{md:"6"}},[s("label",{staticStyle:{padding:"0px",margine:"0px"}},[e._v("Year")]),e._v(" "),s("select",{staticClass:"form-control form-control-sm my-select",attrs:{name:"exp_year",required:""}},e._l(e.years,(function(t,r){return s("option",{key:r,domProps:{value:t.value}},[e._v(e._s(t.year))])})),0)])],1)],1)],1)],1):e._e(),e._v(" "),"2"===e.billingType?s("div",[s("md-field",[s("label",[e._v("Account Number")]),e._v(" "),s("md-input",{attrs:{name:"ach_account_number",required:""}})],1),e._v(" "),s("md-field",[s("label",[e._v("Routing")]),e._v(" "),s("md-input",{attrs:{name:"ach_routing",required:""}})],1)],1):e._e(),e._v(" "),"2"===e.userType?s("div",[s("h4",{staticClass:"font-weight-bold"},[e._v("Business Information")]),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"4"}},[s("img",{staticClass:"w-100",attrs:{src:e.businessImage}}),e._v(" "),s("md-field",[s("label",[e._v("Business Logo")]),e._v(" "),s("md-file",{attrs:{name:"business_image_file"},on:{change:e.onFileChange2}})],1)],1)],1),e._v(" "),s("md-field",[s("label",[e._v("Designation / Designation")]),e._v(" "),s("md-input",{attrs:{name:"business_designation",required:""}})],1),e._v(" "),s("md-field",[s("label",[e._v("Organization / Business Name")]),e._v(" "),s("md-input",{attrs:{name:"business_name",required:""}})],1),e._v(" "),s("md-field",[s("label",[e._v("Business Street Address")]),e._v(" "),s("md-input",{attrs:{name:"business_street_address",required:""}})],1),e._v(" "),s("b-row",[s("b-col",{attrs:{md:"4"}},[s("md-autocomplete",{attrs:{"md-input-name":"business_city","md-options":e.cities2},on:{"md-changed":e.getCitiesForAutocomplete,"md-opened":e.getCitiesForAutocomplete},scopedSlots:e._u([{key:"md-autocomplete-item",fn:function(t){var s=t.item;return[e._v(e._s(s))]}}],null,!1,1658343616),model:{value:e.newCity2,callback:function(t){e.newCity2=t},expression:"newCity2"}},[s("label",[e._v("Town/County/City")])])],1),e._v(" "),s("b-col",{attrs:{md:"4"}},[s("md-field",[s("label",{attrs:{for:"font"}},[e._v("State")]),e._v(" "),s("md-select",{attrs:{"md-dense":""},model:{value:e.bselectedState,callback:function(t){e.bselectedState=t},expression:"bselectedState"}},e._l(e.states,(function(t,r){return s("md-option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.bselectedState,expression:"bselectedState"}],attrs:{name:"business_state",type:"hidden"},domProps:{value:e.bselectedState},on:{input:function(t){t.target.composing||(e.bselectedState=t.target.value)}}})],1)],1),e._v(" "),s("b-col",{attrs:{md:"4"}},[s("md-field",[s("label",[e._v("Business Zip")]),e._v(" "),s("md-input",{attrs:{name:"business_zipcode",required:""}})],1)],1)],1)],1):e._e()],1)],1)],1),e._v(" "),s("b-col",[s("md-card",{staticClass:"mb-4"},[s("md-card-content",[s("div",{staticClass:"s-user-type"},[s("ValidationProvider",{attrs:{name:"userType",rules:"required"}},[s("label",[e._v("I want to be a:")]),e._v(" "),s("md-radio",{staticClass:"md-primary",attrs:{name:"subscription",value:"1"},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[e._v("SUN Club Member")]),e._v(" "),1!=e.wholesaler_signup_is_hide?s("md-radio",{staticClass:"md-primary",attrs:{name:"subscription",value:"2"},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[e._v("Wholesale Partner (Discount: "+e._s(e.wholesaler_discount)+"%)")]):e._e()],1)],1),e._v(" "),"1"===e.userType?s("div",[s("p",[e._v("\r\n                  Sun Club Membership means you can directly order produce from the Farm and provide you store product updates. An\r\n                  "),s("span",{staticClass:"font-weight-bold"},[e._v("annual membership fee of $"+e._s(e.membership_fee.membership_fee))]),e._v("\r\n                  will give you the opportunity be part of the CSA program SunFarmacy will provide in the future.\r\n                ")]),e._v(" "),s("div",{staticClass:"s-user-type"},[s("ValidationProvider",{attrs:{name:"selectedAmount",rules:"required"}},[s("label",[e._v("I choose:")]),e._v(" "),e._l(e.sunclub_choices,(function(t){return s("md-radio",{key:t.id,staticClass:"md-primary",attrs:{name:"subscription_sunclub_choice_id",value:t.id},model:{value:e.selectedAmount,callback:function(t){e.selectedAmount=t},expression:"selectedAmount"}},[e._v(e._s(t.price)+" (discount:"+e._s(t.discount)+"%)")])}))],2)],1)]):e._e()])],1)],1)],1),e._v(" "),s("b-row",[s("b-col",{attrs:{"offset-md":"2",md:"6"}},[s("br"),e._v(" "),s("br"),e._v(" "),s("p",[e._v("\r\n            By clicking Submit, I confirm that the given information\r\n            is true, complete and accurate.\r\n          ")]),e._v(" "),s("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"lg"},on:{click:function(t){return e.submitButtonClicked()}}},[e._v("Submit")])],1)],1)],1)],1),e._v(" "),s("vue-programmatic-invisible-google-recaptcha",{ref:"invisibleRecaptcha2",attrs:{sitekey:"6LcZmaYZAAAAAHVxYaFz_euKnxzFWKFcO3zX94_H",elementId:"invisibleRecaptcha2",badgePosition:"left",showBadgeMobile:!1,showBadgeDesktop:!0},on:{"recaptcha-callback":e.recaptchaCallback}})],1)}),[],!1,null,"42c969a5",null);t.default=_.exports},pgaV:function(e,t,s){"use strict";function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}s.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,s,a;return t=e,(s=[{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){delete this.errors[e]}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"getAllMessages",value:function(){var e="";if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var r=s[t];e+=this.get(r)}return e}},{key:"getArrayOfMessages",value:function(){var e=[];if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var r=s[t];e.push(this.get(r))}return e}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&r(t.prototype,s),a&&r(t,a),e}()}}]);
//# sourceMappingURL=BillingForm.js.map