(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"6OJt":function(t,e,s){var a=s("PKkQ");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,i);a.locals&&(t.exports=a.locals)},Mics:function(t,e,s){"use strict";var a=s("6OJt");s.n(a).a},PKkQ:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".order-summary .cart-container[data-v-28355bb6] {\n  min-height: 620px;\n  border: 2px solid lightgray !important;\n  padding: 10px;\n  border-radius: 5px;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 10px;\n}\n.order-summary .cart-container .content[data-v-28355bb6] {\n  min-height: 600px;\n}\n.order-summary .cart-container .content .cart-header[data-v-28355bb6] {\n  padding: 10px 0px 0px 20px;\n  text-align: left;\n}\n@media (min-width: 992px) {\n.main-conatiner[data-v-28355bb6] {\n    max-width: 1000px;\n}\n}\n@media (min-width: 1200px) {\n.main-conatiner[data-v-28355bb6] {\n    max-width: 1210px;\n}\n}\n@media (min-width: 1300px) {\n.main-conatiner[data-v-28355bb6] {\n    max-width: 1250px;\n}\n}\n@media (min-width: 1400px) {\n.main-conatiner[data-v-28355bb6] {\n    max-width: 1300px;\n}\n}\n.btn-edit[data-v-28355bb6] {\n  background: transparent;\n  border: 0px;\n  color: gray;\n  font-size: 20px;\n}",""])},ZeDl:function(t,e,s){"use strict";s.r(e);var a=s("o0o1"),i=s.n(a),n=s("p46w"),r=s.n(n);function o(t,e,s,a,i,n,r){try{var o=t[n](r),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(a,i)}var l={components:{"products-warning-modal":function(){return s.e(2).then(s.bind(null,"ViSy"))},"cp-selected-items":function(){return s.e(63).then(s.bind(null,"qlK5"))},"os-fiacre":function(){return s.e(62).then(s.bind(null,"uC7G"))},"guest-payment-modal":function(){return s.e(61).then(s.bind(null,"+/77"))}},props:["action","propproducts","guest","user","sunclubmember","delivery_fee","wholesaler_minimum_order_amount","expected_delivery_dates","user_billing_type"],data:function(){return{products:[],shipments:"pickup",shipmentsOptions:[{text:"Deliver",value:"deliver"},{text:"Pick-up",value:"pickup"}],cart:[],sun_wholesale_payment:"",placeorder:!1,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),nearestPickupZones:[],nearestDeliveryZones:[],errorMessage:"",coupon_code:"",couponMessage:"",coupon:{},couponCodeIsValid:!1,guestHasAddress:!1,guestAddress:"",guestAddressObj:{},guestAddressModalIsReady:!1,needToSetBillingInfo:!1,googleAPIKEY:"AIzaSyD-aqJby-P72dOO5xNfOI3X2EjAPffOQbc",org_id:r.a.get("ff-org-id"),org_name:r.a.get("ff-org-name"),org_address:r.a.get("ff-org-address")}},computed:{shipmentsPrice:function(){return"deliver"==this.shipments?this.delivery_fee:0},underConstruction:function(){LoadingOverlay(),setTimeout((function(){LoadingOverlayHide()}),5e3)},totalAmount:function(){if(0==this.cart.length)return 0;var t=0;return this.cart.forEach((function(e){t+=e.subscription_price})),t},getDiscount:function(){var t=0;return 0==this.guest&&(t=this.totalAmount*(this.user.discount/100)),t},getCouponDiscount:function(){var t=0;return this.couponCodeIsValid&&(t=this.coupon.is_percentage?this.totalAmount*(this.coupon.discount_amount/100):this.coupon.discount_amount),t},getTotalTaxAmount:function(){var t=this;if(0!=this.cart.length){var e=0;return this.cart.forEach((function(s){2==t.user.customer_role?e+=s.atr_tax_amount_sc*s.qty:3==t.user.customer_role?e+=s.atr_tax_amount_ws*s.qty:e+=s.atr_tax_amount*s.qty})),e}return 0},getCCAmount:function(){return 0==this.cart.length?0:.03*this.totalAmount},getACHAmount:function(){return 0==this.cart.length?0:.02*this.totalAmount},OverAllTotal:function(){var t=0;return t=this.totalAmount,"CC"==this.user_billing_type&&(t+=this.getCCAmount),"ACH"==this.user_billing_type&&(t+=this.getACHAmount),t},remainingBalance:function(){var t=this.user.balance-this.OverAllTotal;return t<0&&(t=0),t},additionalCharge:function(){var t=0;return 2==this.user.customer_role&&this.OverAllTotal>this.user.balance&&(t=this.OverAllTotal-this.user.balance),t},cart_badge:function(){return this.cart.length}},created:function(){this.getCart(),0==this.guest&&this.getLatLong(this.user.atr_full_address)},methods:{guestProcessToPayment:function(){this.needToSetBillingInfo=!1,this.guestHasAddress?"deliver"==this.shipments?0==this.nearestDeliveryZones.length?(this.errorMessage="Your adress does not have nearest delivery zone.",window.scrollTo(0,0)):$("#modalLogin3").modal("show"):0==this.nearestPickupZones.length?(this.errorMessage="Your adress does not have nearest pick-up zone.",window.scrollTo(0,0)):$("#modalLogin3").modal("show"):(this.errorMessage='Please, Enter your "address" before proceed to payment',window.scrollTo(0,0))},OpenGuestPaymentModal:function(){$("#modalLogin3").modal("hide"),$("#guestPaymentModal").modal("show")},showGuestAddressModal:function(){this.guestAddressModalIsReady&&$("#guestAddressModal").modal("show")},applyCode:function(){var t=this;LoadingOverlay(),this.couponMessage="",this.coupon_code&&axios.post("/referrals/checkCouponCode",{code:this.coupon_code}).then((function(e){t.couponMessage=e.data.message,t.coupon=e.data.coupon,t.couponCodeIsValid=!0,LoadingOverlayHide()})).catch((function(e){console.error(e),t.couponCodeIsValid=!1,t.errorMessage="Msg: "+e.response.data.error_message,window.scrollTo(0,0),LoadingOverlayHide()}))},cancelCoupon:function(){this.couponCodeIsValid=!1,this.coupon=[],this.coupon_code="",this.couponMessage=""},editAddress:function(){0==this.guest?(LoadingOverlay(),window.location.href="/myprofile"):this.guestAddressModalIsReady&&$("#guestAddressModal").modal("show")},shipmentsChange:function(){},displayNumber:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},closeErrorMessage:function(){this.errorMessage=""},showAdditionalChargeModal:function(){this.$refs.confirmAdditionalChargeModal.show()},hideAdditionalChargeModal:function(){this.$refs.confirmAdditionalChargeModal.hide()},confirmAdditionalCharge:function(){this.needToSetBillingInfo=!1,this.additionalCharge>0?this.showAdditionalChargeModal():1==this.user.customer_role?(this.errorMessage="Please, Complete and submit your billing information before placing order.",this.placeorder=!1,this.needToSetBillingInfo=!0,window.scrollTo(0,0),LoadingOverlayHide()):this.ifHasNearestZone()},ifHasNearestZone:function(){"deliver"==this.shipments?0==this.nearestDeliveryZones.length?(this.errorMessage="Your adress does not have nearest delivery zone.",window.scrollTo(0,0),this.hideAdditionalChargeModal()):this.placeOrder():0==this.nearestPickupZones.length?(this.errorMessage="Your adress does not have nearest pick-up zone.",window.scrollTo(0,0),this.hideAdditionalChargeModal()):this.placeOrder()},placeOrder:function(){this.cart.length>0?(LoadingOverlay(),1==this.guest?(this.placeorder=!0,this.guestOrder()):2==this.user.customer_role?(this.placeorder=!0,this.sunClubOrder()):3==this.user.customer_role?(this.placeorder=!0,this.totalAmount<this.wholesaler_minimum_order_amount?(this.placeorder=!1,LoadingOverlayHide(),window.scrollTo(0,0),$("#warningModal").modal("show")):this.wholeSaleOrder()):1==this.user.customer_role?(this.errorMessage="Please, Complete and submit your billing information before placing order.",this.placeorder=!1,this.needToSetBillingInfo=!0,window.scrollTo(0,0),LoadingOverlayHide()):LoadingOverlayHide()):(this.errorMessage="You Dont Have Selected Products.",window.scrollTo(0,0))},sunClubOrder:function(){var t=this;if(this.remainingBalance<0)alert("Not Enough Balance"),this.placeorder=!1;else{var e=null;0!=this.nearestPickupZones.length&&(e=this.nearestPickupZones[0].id);var s=null;0!=this.nearestDeliveryZones.length&&(s=this.nearestDeliveryZones[0].id);var a=this.couponCodeIsValid?this.coupon_code:null;axios.post("/placeorder/sunclub",{cart:this.cart,shipments:this.shipments,pickup_zone_id:e,delivery_zone_id:s,coupon_code:a}).then((function(e){console.log(e),t.cart=[],localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.setItem("cart_badge",t.cart.length),window.location.href="/placeorder/thankyou",t.placeorder=!1})).catch((function(e){t.errorMessage="Payment error: "+e.response.data.data_message,t.placeorder=!1,window.scrollTo(0,0),LoadingOverlayHide()}))}},wholeSaleOrder:function(){var t=this,e=null;0!=this.nearestPickupZones.length&&(e=this.nearestPickupZones[0].id);var s=null;0!=this.nearestDeliveryZones.length&&(s=this.nearestDeliveryZones[0].id);var a=this.couponCodeIsValid?this.coupon_code:null;axios.post("/placeorder/wholesaler",{cart:this.cart,shipments:this.shipments,pickup_zone_id:e,delivery_zone_id:s,coupon_code:a}).then((function(e){t.cart=[],localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.setItem("cart_badge",t.cart.length),200==e.status&&(window.location.href="/placeorder/thankyou"),t.placeorder=!1})).catch((function(e){t.errorMessage="Payment error: "+e.response.data.data_message,t.placeorder=!1,LoadingOverlayHide()}))},guestOrder:function(){"deliver"===this.shipments?window.location.href="/products/checkout/billinginfo/deliver":window.location.href="/products/checkout/billinginfo/pickup"},getCart:function(){var t,e=this;return(t=i.a.mark((function t(){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(LoadingOverlay(),!e.ifCartExpired()){t.next=6;break}e.cart=[],localStorage.setItem("cart",JSON.stringify(e.cart)),t.next=14;break;case 6:return t.next=8,JSON.parse(localStorage.getItem("cart")||"null");case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0=[];case 11:s=t.t0,e.cart=s,localStorage.setItem("cart_badge",e.cart.length);case 14:0==e.cart.length?1==e.user.sun_is_expired?LoadingOverlayHide():window.location.href="/products":LoadingOverlayHide();case 15:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){o(n,a,i,r,l,"next",t)}function l(t){o(n,a,i,r,l,"throw",t)}r(void 0)}))})()},ifCartExpired:function(){var t=localStorage.getItem("cart_expiry");if(!t)return!0;var e=JSON.parse(t);return(new Date).getTime()>e},setCartExpiry:function(t){var e=(new Date).getTime()+t;localStorage.setItem("cart_expiry",e)},removeItemInCart:function(t){this.cart.splice(this.cart.findIndex((function(e){return e.id===t.id})),1),localStorage.setItem("cart",JSON.stringify(this.cart)),localStorage.setItem("cart_badge",this.cart.length),this.$events.fire("updateCartBadge","update cart"),this.setCartExpiry(864e5)},addQty:function(t){t.qty<t.maxorder+50&&(t.qty++,localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5))},subQty:function(t){t.qty>1&&(t.qty--,localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5))},showGuestAddress:function(t){this.getLatLong(t)},getLatLong:function(t){var e=this,s={address:t,key:this.googleAPIKEY};$.get("https://maps.googleapis.com/maps/api/geocode/json",s,(function(t){var s=t.results[0].geometry.location.lat,a=t.results[0].geometry.location.lng;e.getZones(s,a)})).fail((function(){console.log("error")}))},getZones:function(t,e){var s=this,a={lat:t,lng:e};axios({method:"get",url:"/getNearbyPickupZone",params:a}).then((function(t){s.nearestPickupZones=t.data})),axios({method:"get",url:"/getNearbyDeliveryZone",params:a}).then((function(t){s.nearestDeliveryZones=t.data}))}}},c=(s("Mics"),s("KHd+")),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mt-1 mb-5 main-conatiner"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t.errorMessage?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.closeErrorMessage()}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v("\n\t\t\t\t\t"+t._s(t.errorMessage)+"\n\t\t\t\t\t"),t.needToSetBillingInfo?s("span",[s("a",{attrs:{href:"/register/success/confirmed"}},[t._v("Click Here")]),t._v(" to set\n\t\t\t\t\t\tit")]):t._e()])])]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("cp-selected-items",{attrs:{cart:this.cart,customer_role:t.user.customer_role}}),t._v(" "),s("div",{staticClass:"col-lg-4 col-md-5 order-summary"},[s("div",{staticClass:"cart-container bg-white"},[s("div",{staticClass:"content d-flex flex-column"},[(t.guest,s("div",{staticClass:"col-md-12 cart-header"},[s("h4",{staticClass:"text-dark"},[t._v("Shipping")])])),t._v(" "),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"mb-2"},[t._v("Delivery Type:")]),t._v(" "),s("div",{staticClass:"form-group ml-3 mb-0"},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.shipments,expression:"shipments"}],staticClass:"form-check-input",attrs:{type:"radio",value:"deliver",disabled:""},domProps:{checked:t._q(t.shipments,"deliver")},on:{change:function(e){t.shipments="deliver"}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Deliver")])]),t._v(" "),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.shipments,expression:"shipments"}],staticClass:"form-check-input",attrs:{type:"radio",value:"pickup"},domProps:{checked:t._q(t.shipments,"pickup")},on:{change:function(e){t.shipments="pickup"}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("Pick-up")])])])])]),t._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"mb-2"},[t._v("School/Parish Address:")]),t._v(" "),s("div",{staticClass:"ml-3"},[s("b",[t._v(t._s(t.org_name))]),t._v(" "),s("br"),t._v(" "),s("i",{staticClass:"fas fa-map-marker mr-2"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.org_address)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v("\n\t\t\t\t\t\t\t\t\t\t((this will be the pick-up address))\n\t\t\t\t\t\t\t\t\t")])]),t._v(" "),"deliver"==t.shipments?s("tr",[s("td",[t._v("Expected Delivery Date:")]),t._v(" "),s("td",{staticClass:"text-right"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.expected_delivery_dates)+"\n\t\t\t\t\t\t\t\t\t")])]):t._e()])]),t._v(" "),t._m(2),t._v(" "),s("div",[s("os-fiacre",{attrs:{total_amount:t.totalAmount,shipments_price:t.shipmentsPrice,over_all_total:t.OverAllTotal,cc:t.getCCAmount,ach:t.getACHAmount,tax:t.getTotalTaxAmount,user_billing_type:t.user_billing_type}})],1),t._v(" "),s("div",{staticClass:"col-md-12 text-center place-order-btn-container mt-auto"},[0==t.guest?s("h6",{staticClass:"text-danger"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.errorMessage)+"\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),0==t.guest?s("button",{staticClass:"btn btn-lg btn-primary w-100",attrs:{type:"button",disabled:t.placeorder},on:{click:function(e){return t.underConstruction()}}},[t._v("\n\t\t\t\t\t\t\t\tPLACE ORDER\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),1==t.guest?s("button",{staticClass:"btn btn-lg btn-primary w-100",attrs:{type:"button",disabled:t.placeorder},on:{click:function(e){return t.underConstruction()}}},[t._v("\n\t\t\t\t\t\t\t\tPROCEED to PAYMENT\n\t\t\t\t\t\t\t")]):t._e()])])])])],1),t._v(" "),s("b-modal",{ref:"confirmAdditionalChargeModal",attrs:{"hide-footer":"",title:"Confirm Additional Charge"}},[s("div",{staticClass:"d-block text-center"},[s("h3",{staticClass:"mb-5"},[t._v("\n\t\t\t\t\tYour billing account will be charged an additional $"+t._s(t.additionalCharge.toFixed(2))+". Continue?\n\t\t\t\t")]),t._v(" "),s("b-row",{staticClass:"mb-2",staticStyle:{"margin-left":"0","margin-right":"0"}},[s("b-col",[s("b-button",{attrs:{variant:"outline-danger",block:""},on:{click:t.hideAdditionalChargeModal}},[t._v("Cancel")])],1),t._v(" "),s("b-col",[s("b-button",{attrs:{variant:"success",block:""},on:{click:t.ifHasNearestZone}},[t._v("Yes")])],1)],1)],1)]),t._v(" "),s("products-warning-modal",{attrs:{minimum:t.wholesaler_minimum_order_amount}}),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"modalLogin3",tabindex:"-1",role:"dialog","aria-labelledby":"modalLogin3","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),s("div",{staticClass:"modal-body"},[s("form",{attrs:{method:"POST",action:"/login",id:"login"}},[s("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t._m(6),t._v(" "),s("p",{staticClass:"text-center"},[t._v("Or")]),t._v(" "),s("p",{staticClass:"text-center"},[t._v('\n\t\t\t\t\t\t\t\t\t\tDo you want to create an Account? if YES, Please\n\t\t\t\t\t\t\t\t\t\tclick "Sign UP".\n\t\t\t\t\t\t\t\t\t\t'),s("br"),t._v('\n\t\t\t\t\t\t\t\t\t\tElse "'),s("span",{on:{click:function(e){return t.OpenGuestPaymentModal()}}},[s("a",[t._v("click here")])]),t._v('" to proceed the payment\n\t\t\t\t\t\t\t\t\t')]),t._v(" "),t._m(7)])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h4",[e("u",[e("a",{attrs:{href:"/products"}},[this._v("Continue Shopping")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 cart-header mt-3"},[e("h4",{staticClass:"text-dark"},[this._v("Order Summary")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"modalLogin3"}},[this._v("\n\t\t\t\t\t\t\tIf You Have An Account, Please Sign IN.\n\t\t\t\t\t\t")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",staticStyle:{"background-color":"none"}},[e("i",{staticClass:"fas fa-envelope fa-fw"})])]),this._v(" "),e("input",{staticClass:"form-control",attrs:{type:"email",name:"email",id:"email",placeholder:"E-mail Address",maxlength:"191",required:"required"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",staticStyle:{"background-color":"none"}},[e("i",{staticClass:"fas fa-lock fa-fw"})])]),this._v(" "),e("input",{staticClass:"form-control",attrs:{type:"password",name:"password",id:"password",placeholder:"Password",required:"required"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group clearfix"},[e("button",{staticClass:"btn btn-success btn-block",attrs:{id:"loginSubmit",type:"submit"}},[this._v("\n\t\t\t\t\t\t\t\t\t\t\tSIGN IN\n\t\t\t\t\t\t\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group clearfix"},[e("a",{staticClass:"btn btn-info btn-block text-white",attrs:{href:"/register"}},[this._v("SIGN UP")])])}],!1,null,"28355bb6",null);e.default=d.exports}}]);
//# sourceMappingURL=CheckoutPage.js.map