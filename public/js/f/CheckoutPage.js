(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{OHTY:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".order-summary .cart-container[data-v-404982e4] {\n  min-height: 620px;\n  border: 2px solid lightgray !important;\n  padding: 10px;\n  border-radius: 5px;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 10px;\n}\n.order-summary .cart-container .content[data-v-404982e4] {\n  min-height: 600px;\n}\n.order-summary .cart-container .content .cart-header[data-v-404982e4] {\n  padding: 10px 0px 0px 20px;\n  text-align: left;\n}\n@media (min-width: 992px) {\n.main-conatiner[data-v-404982e4] {\n    max-width: 1000px;\n}\n}\n@media (min-width: 1200px) {\n.main-conatiner[data-v-404982e4] {\n    max-width: 1210px;\n}\n}\n@media (min-width: 1300px) {\n.main-conatiner[data-v-404982e4] {\n    max-width: 1250px;\n}\n}\n@media (min-width: 1400px) {\n.main-conatiner[data-v-404982e4] {\n    max-width: 1300px;\n}\n}\n.btn-edit[data-v-404982e4] {\n  background: transparent;\n  border: 0px;\n  color: gray;\n  font-size: 20px;\n}",""])},Vasf:function(t,e,r){"use strict";var a=r("Zbv7");r.n(a).a},Zbv7:function(t,e,r){var a=r("OHTY");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,s);a.locals&&(t.exports=a.locals)},ZeDl:function(t,e,r){"use strict";r.r(e);var a=r("o0o1"),s=r.n(a),i=r("p46w"),n=r.n(i);function o(t,e,r,a,s,i,n){try{var o=t[i](n),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(a,s)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var i=t.apply(e,r);function n(t){o(i,a,s,n,c,"next",t)}function c(t){o(i,a,s,n,c,"throw",t)}n(void 0)}))}}var d={components:{"cp-selected-items":function(){return r.e(63).then(r.bind(null,"qlK5"))},"os-fiacre":function(){return r.e(62).then(r.bind(null,"uC7G"))}},props:["action","propproducts","guest","user","sunclubmember","delivery_fee","wholesaler_minimum_order_amount","expected_delivery_dates","user_billing_type"],data:function(){return{products:[],shipments:"deliver",shipmentsOptions:[{text:"Deliver",value:"deliver"},{text:"Pick-up",value:"pickup"}],cart:[],sun_wholesale_payment:"",placeorderButtonDisabled:!1,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),nearestPickupZones:[],nearestDeliveryZones:[],errorMessage:"",coupon_code:"",couponMessage:"",coupon:{},couponCodeIsValid:!1,guestHasAddress:!1,guestAddress:"",guestAddressObj:{},guestAddressModalIsReady:!1,needToSetBillingInfo:!1,googleAPIKEY:"AIzaSyD-aqJby-P72dOO5xNfOI3X2EjAPffOQbc",org_id:n.a.get("ff-org-id"),org_name:n.a.get("ff-org-name"),org_address:n.a.get("ff-org-address"),referral_details:{total_user_refferal_amount:0,details:[]},checkDonate:!0}},computed:{shipmentsPrice:function(){return"deliver"==this.shipments?this.delivery_fee:0},totalAmount:function(){var t=this;if(0==this.cart.length)return 0;var e=0;return this.cart.forEach((function(r){r.is_subscription?e+=r.subscription_price:2==t.user.customer_role?e+=r.member_price*r.qty:3==t.user.customer_role?e+=r.wholesale_price*r.qty:e+=r.price*r.qty})),e},getDiscount:function(){var t=0;return 0==this.guest&&(t=this.totalAmount*(this.user.discount/100)),t},getCouponDiscount:function(){var t=0;return this.couponCodeIsValid&&(t=this.coupon.is_percentage?this.totalAmount*(this.coupon.discount_amount/100):this.coupon.discount_amount),t},getCCAmount:function(){return 0==this.cart.length?0:.03*this.totalAmount},getACHAmount:function(){return 0==this.cart.length?0:.02*this.totalAmount},OverAllTotal:function(){var t=0;return t=this.totalAmount,"CC"==this.user_billing_type&&(t+=this.getCCAmount),"ACH"==this.user_billing_type&&(t+=this.getACHAmount),t-=this.referral_details.total_user_refferal_amount,t+=parseFloat(this.shipmentsPrice)},cart_badge:function(){return this.cart.length}},created:function(){var t=this;1==this.guest?this.getCart():(this.getReferralDetails(),setTimeout((function(){t.org_id=n.a.get("ff-org-id"),t.org_name=n.a.get("ff-org-name"),t.org_address=n.a.get("ff-org-address"),t.getCart2()}),500))},methods:{editAddress:function(){0==this.guest&&(LoadingOverlay(),window.location.href="/myprofile")},displayNumber:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},closeErrorMessage:function(){this.errorMessage=""},placeOrder:function(){this.placeorderButtonDisabled=!0,this.cart.length>0?1==this.checkDonate?$("#enterOptionCIdModal2").modal("show"):(this.org_id=0,this.fiacreCustomerOrder()):(this.errorMessage="Please shop for products first.",window.scrollTo(0,0),LoadingOverlayHide(),this.placeorderButtonDisabled=!1)},fiacreCustomerOrder:function(){var t=this;LoadingOverlay(),axios.post("/placeorder/fiacreCustomer",{cart:this.cart,org_id:this.org_id,shipments:this.shipments}).then((function(e){200==e.status&&(window.location.href="/placeorder/thankyou"),t.placeorderButtonDisabled=!1})).catch((function(e){t.errorMessage="Payment error: "+e.response.data.data_message,t.placeorderButtonDisabled=!1,window.scrollTo(0,0),LoadingOverlayHide()}))},getCart:function(){var t=this;return c(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(LoadingOverlay(),!t.ifCartExpired()){e.next=6;break}t.cart=[],localStorage.setItem("cart",JSON.stringify(t.cart)),e.next=14;break;case 6:return e.next=8,JSON.parse(localStorage.getItem("cart")||"null");case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=[];case 11:r=e.t0,t.cart=r,localStorage.setItem("cart_badge",t.cart.length);case 14:0==t.cart.length?1==t.user.sun_is_expired?LoadingOverlayHide():window.location.href="/products":LoadingOverlayHide();case 15:case"end":return e.stop()}}),e)})))()},getCart2:function(){var t=this;return c(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:LoadingOverlay(),axios.get("/cart/getUserCartDetails/".concat(t.user.id,"/").concat(t.org_id)).then((function(e){var r=e.data;t.cart=[],r.forEach((function(e){e.atr_details.qty=e.qty,t.cart.push(e.atr_details)})),LoadingOverlayHide()}));case 2:case"end":return e.stop()}}),e)})))()},getReferralDetails:function(){var t=this;axios.get("/getUserReferralCodeDetails").then((function(e){t.referral_details=e.data,console.log(e.data.details),t.$refs.ReferralModalRef.data=e.data}))},ifCartExpired:function(){var t=localStorage.getItem("cart_expiry");if(!t)return!0;var e=JSON.parse(t);return(new Date).getTime()>e},setCartExpiry:function(t){var e=(new Date).getTime()+t;localStorage.setItem("cart_expiry",e)},removeItemInCart:function(t){var e=this;1==this.guest?(this.cart.splice(this.cart.findIndex((function(e){return e.id===t.id})),1),localStorage.setItem("cart",JSON.stringify(this.cart)),localStorage.setItem("cart_badge",this.cart.length),this.$events.fire("updateCartBadge","update cart"),this.setCartExpiry(864e5)):(LoadingOverlay(),axios.post("/cart/removeProductOfUserCart/".concat(this.user.id,"/").concat(this.org_id,"/").concat(t.id)).then((function(r){e.$events.fire("updateCartBadge3",r.data),LoadingOverlayHide(),e.cart.splice(e.cart.findIndex((function(e){return e.id===t.id})),1)})).catch((function(t){LoadingOverlayHide(),console.error(t)})))},addQty:function(t){if(t.qty<t.maxorder+50)if(t.qty++,1==this.guest)localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5);else{LoadingOverlay();var e={product_details:t,user_id:this.user.id,org_id:this.org_id};axios.post("/cart/updateQuantity",e).then((function(t){console.log(t),LoadingOverlayHide()})).catch((function(e){t.qty--,console.error(e),LoadingOverlayHide(),alert("Something went wrong! Please Contat Support. "+e)}))}},subQty:function(t){if(t.qty>1)if(t.qty--,1==this.guest)localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5);else{LoadingOverlay();var e={product_details:t,user_id:this.user.id,org_id:this.org_id};axios.post("/cart/updateQuantity",e).then((function(t){console.log(t),LoadingOverlayHide()})).catch((function(e){t.qty++,console.error(e),LoadingOverlayHide(),alert("Something went wrong! Please Contat Support. "+e)}))}},sub:function(t,e,r){if(console.log(t),console.log(e),"sub"==e.sub&&(this.$refs.ProductsSubModalRef3.data1=t,this.$refs.ProductsSubModalRef3.data=e,this.$refs.ProductsSubModalRef3.index=r,this.$refs.ProductsSubModalRef3.openModal()),"unsub"==e.sub){var a=t.selected_products,s=t.atr_orginal_selected_products;a[r]=s[r];var i=a;t.selected_products=[],t.selected_products=i,this.updateProductDetails(t)}},updateProducts:function(t,e,r){var a=t.selected_products;a[r]=e;var s=a;t.selected_products=[],t.selected_products=s,this.updateProductDetails(t)},updateRecurring:function(t){t.recurring=!t.recurring,this.updateProductDetails(t)},updateProductDetails:function(t){if(0==this.guest){LoadingOverlay();var e={product_details:t,user_id:this.user.id,org_id:this.org_id};axios.post("/cart/updateProductDetails",e).then((function(t){console.log(t),LoadingOverlayHide()})).catch((function(t){console.error(t),alert("Something went wrong! Please Contat Support. "+t),document.location.reload(!0)}))}}}},l=(r("Vasf"),r("KHd+")),u=Object(l.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-1 mb-5 main-conatiner"},[t._m(0),t._v(" "),t.errorMessage?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.closeErrorMessage()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]),t._v("\n          "+t._s(t.errorMessage)+"\n          "),t.needToSetBillingInfo?r("span",[r("a",{attrs:{href:"/register/success/confirmed"}},[t._v("Click Here")]),t._v(" to set\n            it")]):t._e()])])]):t._e(),t._v(" "),r("div",{staticClass:"row"},[r("cp-selected-items",{attrs:{cart:this.cart,customer_role:t.user.customer_role}}),t._v(" "),r("div",{staticClass:"col-lg-4 col-md-5 order-summary"},[r("div",{staticClass:"cart-container bg-white"},[r("div",{staticClass:"content d-flex flex-column"},[t._m(1),t._v(" "),r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",{attrs:{colspan:"2"}},[r("div",{staticClass:"mb-2"},[t._v("Delivery Type:")]),t._v(" "),r("div",{staticClass:"form-group ml-3 mb-0"},[r("div",{staticClass:"form-check form-check-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.shipments,expression:"shipments"}],staticClass:"form-check-input",attrs:{type:"radio",value:"deliver",disabled:1==this.guest},domProps:{checked:t._q(t.shipments,"deliver")},on:{change:function(e){t.shipments="deliver"}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Deliver")])])])])]),t._v(" "),"pickup"==t.shipments?r("tr",[r("td",{attrs:{colspan:"2"}},[r("div",{staticClass:"mb-2"},[t._v("School/Parish Address:")]),t._v(" "),r("div",{staticClass:"ml-3"},[r("b",[t._v(t._s(t.org_name))]),t._v(" "),r("br"),t._v(" "),r("i",{staticClass:"fas fa-map-marker mr-2"}),t._v("\n                      "+t._s(t.org_address)+"\n                    ")]),t._v(" "),r("br"),t._v(" "),r("i",[t._v("This will be the pick-up address")])])]):t._e(),t._v(" "),"deliver"==t.shipments?r("tr",[r("td",{attrs:{colspan:"2"}},[r("div",{staticClass:"mb-2"},[t._v("Your Address:")]),t._v(" "),r("div",{staticClass:"ml-3"},[r("i",{staticClass:"fas fa-map-marker mr-2"}),t._v("\n                      "+t._s(t.user.atr_full_address)+"\n                      "),r("button",{staticClass:"btn-edit float-right",attrs:{type:"button"},on:{click:function(e){return t.editAddress()}}},[r("i",{staticClass:"fas fa-edit"})])]),t._v(" "),r("br"),t._v(" "),r("i",[t._v("This will be the delivery address")])])]):t._e(),t._v(" "),"deliver"==t.shipments?r("tr",[r("td",[t._v("Expected Delivery Date:")]),t._v(" "),r("td",{staticClass:"text-right"},[t._v("\n                    "+t._s(t.expected_delivery_dates)+"\n                  ")])]):t._e()])]),t._v(" "),t._m(2),t._v(" "),r("div",[r("os-fiacre",{attrs:{total_amount:t.totalAmount,over_all_total:t.OverAllTotal,cc:t.getCCAmount,ach:t.getACHAmount,user_billing_type:t.user_billing_type,referral_details:t.referral_details,shipments_price:t.shipmentsPrice}})],1),t._v(" "),r("div",{staticClass:"col-md-12 text-left place-order-btn-container mt-auto"},[r("p",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.checkDonate,expression:"checkDonate"}],attrs:{type:"checkbox",id:"checkDonate"},domProps:{checked:Array.isArray(t.checkDonate)?t._i(t.checkDonate,null)>-1:t.checkDonate},on:{change:function(e){var r=t.checkDonate,a=e.target,s=!!a.checked;if(Array.isArray(r)){var i=t._i(r,null);a.checked?i<0&&(t.checkDonate=r.concat([null])):i>-1&&(t.checkDonate=r.slice(0,i).concat(r.slice(i+1)))}else t.checkDonate=s}}}),t._v("\n                 By checking this box, a portion of this order will be donated to your chosen school or parish.\n              ")])]),t._v(" "),r("div",{staticClass:"col-md-12 text-center place-order-btn-container mt-auto"},[0==t.guest?r("h6",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.errorMessage)+"\n              ")]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary w-100",attrs:{type:"button",disabled:t.placeorderButtonDisabled},on:{click:function(e){return t.placeOrder()}}},[t._v("\n                PLACE ORDER\n              ")])])])])])],1),t._v(" "),r("EnterOptionCModal2",{ref:"EnterOptionCModal2Ref"}),t._v(" "),r("ProductsSubModal3",{ref:"ProductsSubModalRef3"}),t._v(" "),r("ReferralModal",{ref:"ReferralModalRef"})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h4",[e("u",[e("a",{attrs:{href:"/products"}},[this._v("Continue Shopping")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 cart-header"},[e("h4",{staticClass:"text-dark"},[this._v("Shipping")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 cart-header mt-3"},[e("h4",{staticClass:"text-dark"},[this._v("Order Summary")])])}],!1,null,"404982e4",null);e.default=u.exports}}]);
//# sourceMappingURL=CheckoutPage.js.map