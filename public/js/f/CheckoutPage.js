(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{JW2P:function(t,e,r){"use strict";var a=r("N933");r.n(a).a},N933:function(t,e,r){var a=r("pBla");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,n);a.locals&&(t.exports=a.locals)},ZeDl:function(t,e,r){"use strict";r.r(e);var a=r("o0o1"),n=r.n(a),i=r("p46w"),s=r.n(i);function o(t,e,r,a,n,i,s){try{var o=t[i](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(a,n)}var c={components:{"cp-selected-items":function(){return r.e(64).then(r.bind(null,"qlK5"))},"os-fiacre":function(){return r.e(63).then(r.bind(null,"uC7G"))}},props:["action","propproducts","guest","user","sunclubmember","delivery_fee","wholesaler_minimum_order_amount","expected_delivery_dates","user_billing_type"],data:function(){return{products:[],shipments:"pickup",shipmentsOptions:[{text:"Deliver",value:"deliver"},{text:"Pick-up",value:"pickup"}],cart:[],sun_wholesale_payment:"",placeorderButtonDisabled:!1,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),nearestPickupZones:[],nearestDeliveryZones:[],errorMessage:"",coupon_code:"",couponMessage:"",coupon:{},couponCodeIsValid:!1,guestHasAddress:!1,guestAddress:"",guestAddressObj:{},guestAddressModalIsReady:!1,needToSetBillingInfo:!1,googleAPIKEY:"AIzaSyD-aqJby-P72dOO5xNfOI3X2EjAPffOQbc",org_id:s.a.get("ff-org-id"),org_name:s.a.get("ff-org-name"),org_address:s.a.get("ff-org-address")}},computed:{totalAmount:function(){var t=this;if(0==this.cart.length)return 0;var e=0;return this.cart.forEach((function(r){r.is_subscription?e+=r.subscription_price:2==t.user.customer_role?e+=r.member_price*r.qty:3==t.user.customer_role?e+=r.wholesale_price*r.qty:e+=r.price*r.qty})),e},getDiscount:function(){var t=0;return 0==this.guest&&(t=this.totalAmount*(this.user.discount/100)),t},getCouponDiscount:function(){var t=0;return this.couponCodeIsValid&&(t=this.coupon.is_percentage?this.totalAmount*(this.coupon.discount_amount/100):this.coupon.discount_amount),t},getCCAmount:function(){return 0==this.cart.length?0:.03*this.totalAmount},getACHAmount:function(){return 0==this.cart.length?0:.02*this.totalAmount},OverAllTotal:function(){var t=0;return t=this.totalAmount,"CC"==this.user_billing_type&&(t+=this.getCCAmount),"ACH"==this.user_billing_type&&(t+=this.getACHAmount),t},cart_badge:function(){return this.cart.length}},created:function(){this.getCart()},methods:{displayNumber:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},closeErrorMessage:function(){this.errorMessage=""},placeOrder:function(){LoadingOverlay(),this.placeorderButtonDisabled=!0,this.cart.length>0?this.fiacreCustomerOrder():(this.errorMessage="You Dont Have Selected Products.",window.scrollTo(0,0),LoadingOverlayHide(),this.placeorderButtonDisabled=!1)},fiacreCustomerOrder:function(){var t=this;axios.post("/placeorder/fiacreCustomer",{cart:this.cart,org_id:this.org_id}).then((function(e){t.cart=[],localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.setItem("cart_badge",t.cart.length),200==e.status&&(window.location.href="/placeorder/thankyou"),t.placeorderButtonDisabled=!1})).catch((function(e){t.errorMessage="Payment error: "+e.response.data.data_message,t.placeorderButtonDisabled=!1,window.scrollTo(0,0),LoadingOverlayHide()}))},getCart:function(){var t,e=this;return(t=n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(LoadingOverlay(),!e.ifCartExpired()){t.next=6;break}e.cart=[],localStorage.setItem("cart",JSON.stringify(e.cart)),t.next=14;break;case 6:return t.next=8,JSON.parse(localStorage.getItem("cart")||"null");case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0=[];case 11:r=t.t0,e.cart=r,localStorage.setItem("cart_badge",e.cart.length);case 14:0==e.cart.length?1==e.user.sun_is_expired?LoadingOverlayHide():window.location.href="/products":LoadingOverlayHide();case 15:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function s(t){o(i,a,n,s,c,"next",t)}function c(t){o(i,a,n,s,c,"throw",t)}s(void 0)}))})()},ifCartExpired:function(){var t=localStorage.getItem("cart_expiry");if(!t)return!0;var e=JSON.parse(t);return(new Date).getTime()>e},setCartExpiry:function(t){var e=(new Date).getTime()+t;localStorage.setItem("cart_expiry",e)},removeItemInCart:function(t){this.cart.splice(this.cart.findIndex((function(e){return e.id===t.id})),1),localStorage.setItem("cart",JSON.stringify(this.cart)),localStorage.setItem("cart_badge",this.cart.length),this.$events.fire("updateCartBadge","update cart"),this.setCartExpiry(864e5)},addQty:function(t){t.qty<t.maxorder+50&&(t.qty++,localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5))},subQty:function(t){t.qty>1&&(t.qty--,localStorage.setItem("cart",JSON.stringify(this.cart)),this.setCartExpiry(864e5))}}},l=(r("JW2P"),r("KHd+")),d=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-1 mb-5 main-conatiner"},[t._m(0),t._v(" "),t.errorMessage?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.closeErrorMessage()}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]),t._v("\n\t\t\t\t\t"+t._s(t.errorMessage)+"\n\t\t\t\t\t"),t.needToSetBillingInfo?r("span",[r("a",{attrs:{href:"/register/success/confirmed"}},[t._v("Click Here")]),t._v(" to set\n\t\t\t\t\t\tit")]):t._e()])])]):t._e(),t._v(" "),r("div",{staticClass:"row"},[r("cp-selected-items",{attrs:{cart:this.cart,customer_role:t.user.customer_role}}),t._v(" "),r("div",{staticClass:"col-lg-4 col-md-5 order-summary"},[r("div",{staticClass:"cart-container bg-white"},[r("div",{staticClass:"content d-flex flex-column"},[t._m(1),t._v(" "),r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("td",{attrs:{colspan:"2"}},[r("div",{staticClass:"mb-2"},[t._v("Delivery Type:")]),t._v(" "),r("div",{staticClass:"form-group ml-3 mb-0"},[r("div",{staticClass:"form-check form-check-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.shipments,expression:"shipments"}],staticClass:"form-check-input",attrs:{type:"radio",value:"deliver",disabled:""},domProps:{checked:t._q(t.shipments,"deliver")},on:{change:function(e){t.shipments="deliver"}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Deliver")])]),t._v(" "),r("div",{staticClass:"form-check form-check-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.shipments,expression:"shipments"}],staticClass:"form-check-input",attrs:{type:"radio",value:"pickup"},domProps:{checked:t._q(t.shipments,"pickup")},on:{change:function(e){t.shipments="pickup"}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("Pick-up")])])])])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[r("div",{staticClass:"mb-2"},[t._v("School/Parish Address:")]),t._v(" "),r("div",{staticClass:"ml-3"},[r("b",[t._v(t._s(t.org_name))]),t._v(" "),r("br"),t._v(" "),r("i",{staticClass:"fas fa-map-marker mr-2"}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.org_address)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),r("br"),t._v(" "),r("i",[t._v("This will be the pick-up address")])])])])]),t._v(" "),t._m(2),t._v(" "),r("div",[r("os-fiacre",{attrs:{total_amount:t.totalAmount,over_all_total:t.OverAllTotal,cc:t.getCCAmount,ach:t.getACHAmount,user_billing_type:t.user_billing_type}})],1),t._v(" "),r("div",{staticClass:"col-md-12 text-center place-order-btn-container mt-auto"},[0==t.guest?r("h6",{staticClass:"text-danger"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.errorMessage)+"\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary w-100",attrs:{type:"button",disabled:t.placeorderButtonDisabled},on:{click:function(e){return t.placeOrder()}}},[t._v("\n\t\t\t\t\t\t\t\tPLACE ORDER\n\t\t\t\t\t\t\t")])])])])])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h4",[e("u",[e("a",{attrs:{href:"/products"}},[this._v("Continue Shopping")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 cart-header"},[e("h4",{staticClass:"text-dark"},[this._v("Shipping")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 cart-header mt-3"},[e("h4",{staticClass:"text-dark"},[this._v("Order Summary")])])}],!1,null,"642e70f4",null);e.default=d.exports},pBla:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".order-summary .cart-container[data-v-642e70f4] {\n  min-height: 620px;\n  border: 2px solid lightgray !important;\n  padding: 10px;\n  border-radius: 5px;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 10px;\n}\n.order-summary .cart-container .content[data-v-642e70f4] {\n  min-height: 600px;\n}\n.order-summary .cart-container .content .cart-header[data-v-642e70f4] {\n  padding: 10px 0px 0px 20px;\n  text-align: left;\n}\n@media (min-width: 992px) {\n.main-conatiner[data-v-642e70f4] {\n    max-width: 1000px;\n}\n}\n@media (min-width: 1200px) {\n.main-conatiner[data-v-642e70f4] {\n    max-width: 1210px;\n}\n}\n@media (min-width: 1300px) {\n.main-conatiner[data-v-642e70f4] {\n    max-width: 1250px;\n}\n}\n@media (min-width: 1400px) {\n.main-conatiner[data-v-642e70f4] {\n    max-width: 1300px;\n}\n}\n.btn-edit[data-v-642e70f4] {\n  background: transparent;\n  border: 0px;\n  color: gray;\n  font-size: 20px;\n}",""])}}]);
//# sourceMappingURL=CheckoutPage.js.map