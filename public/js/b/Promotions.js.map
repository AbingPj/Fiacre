{"version":3,"sources":["webpack:///./resources/js/backend/components/promotions/index.vue?569c","webpack:///./resources/js/backend/components/promotions/index.vue?c043","webpack:///resources/js/backend/components/promotions/index.vue","webpack:///./resources/js/backend/components/promotions/index.vue?b300","webpack:///./resources/js/backend/components/promotions/index.vue","webpack:///./resources/js/backend/errorClass.js","webpack:///./resources/js/backend/components/promotions/index.vue?7a17","webpack:///./resources/js/backend/components/promotions/index.vue?90db"],"names":["content","module","i","options","transform","undefined","locals","exports","props","data","email","subject","myHTML","errors","sendto","created","this","propemail","mounted","$","document","ready","summernote","placeholder","tabsize","toolbar","styleTags","markupStr","self","methods","addSelectedProduct","selectedProducts","push","selectProducts","modal","sendEmail","LoadingOverlay","formData","append","JSON","stringify","axios","showErrorMessage","$events","fire","removeSelectedProduct","$refs","select_products_modal","products","forEach","product","id","selected","splice","showSuccessMessage","msg","component","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","on","$event","preventDefault","directives","name","rawName","value","expression","domProps","_q","target","composing","length","_e","_l","item","index","key","staticStyle","image_link","_s","price","member_price","wholesale_price","ref","Errors","field","hasOwnProperty","str","Object","keys","get","arr"],"mappings":"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","file":"js/b/Promotions.js","sourcesContent":["\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--5-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--5-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--5-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column min-vh-100\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-10 mt-5\"},[_c('form',{attrs:{\"id\":\"myForm\",\"name\":\"myForm\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.sendEmail()}}},[_c('div',{staticClass:\"form-group mb-3\"},[_c('label',{staticClass:\"font-weight-bold\"},[_vm._v(\"Send To\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendto),expression:\"sendto\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"name\":\"sendto\",\"value\":\"all\"},domProps:{\"checked\":_vm._q(_vm.sendto,\"all\")},on:{\"change\":function($event){_vm.sendto=\"all\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"inlineRadio1\"}},[_vm._v(\"All Members\")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendto),expression:\"sendto\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"name\":\"sendto\",\"value\":\"sunclubmembers\"},domProps:{\"checked\":_vm._q(_vm.sendto,\"sunclubmembers\")},on:{\"change\":function($event){_vm.sendto=\"sunclubmembers\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"inlineRadio2\"}},[_vm._v(\"Sun Club Members\")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendto),expression:\"sendto\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"name\":\"sendto\",\"value\":\"wholesalers\"},domProps:{\"checked\":_vm._q(_vm.sendto,\"wholesalers\")},on:{\"change\":function($event){_vm.sendto=\"wholesalers\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"inlineRadio2\"}},[_vm._v(\"Wholesalers\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"font-weight-bold\"},[_vm._v(\"Subject\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subject),expression:\"subject\"}],staticClass:\"form-control\",attrs:{\"name\":\"subject\",\"type\":\"text\"},domProps:{\"value\":(_vm.subject)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.subject=$event.target.value}}})]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"font-weight-bold\"},[_vm._v(\"Select Products to promote:\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),(_vm.selectedProducts.length == 0)?_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn btn-lg btn-info\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.selectProducts()}}},[_vm._v(\"Select Products to Promote\")])]):_vm._e(),_vm._v(\" \"),(_vm.selectedProducts.length != 0)?_c('div',[_c('button',{staticClass:\"btn btn-sm btn-info\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.selectProducts()}}},[_vm._v(\"Select More\")])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"w-100\"},[_c('div',{staticClass:\"d-flex flex-wrap\"},_vm._l((_vm.selectedProducts),function(item,index){return _c('div',{key:index,staticClass:\"d-flex flex-row mt-3 w-50\"},[_c('div',{staticClass:\"mr-2\"},[_c('img',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\",\"object-fit\":\"cover\"},attrs:{\"src\":item.image_link}})]),_vm._v(\" \"),_c('div',{staticClass:\"w-50\"},[_c('h6',[_c('b',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('button',{staticClass:\"btn-edit float-right text-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeSelectedProduct(item)}}},[_c('i',{staticClass:\"fas fa-times-circle\"})])]),_vm._v(\" \"),_c('div',[_vm._v(\"price: \"+_vm._s(item.price))]),_vm._v(\" \"),_c('div',[_vm._v(\"sunclub price: \"+_vm._s(item.member_price))]),_vm._v(\" \"),_c('div',[_vm._v(\"wholesale price: \"+_vm._s(item.wholesale_price))])])])}),0)]),_vm._v(\" \"),_vm._m(2)])])])]),_vm._v(\" \"),_c('admin-select-products-modal-3',{ref:\"select_products_modal\",attrs:{\"selected_products\":_vm.selectedProducts}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h2',{staticClass:\"card-title mb-0\"},[_vm._v(\"Promotions\")])]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"font-weight-bold\"},[_vm._v(\"Content:\")]),_vm._v(\" \"),_c('textarea',{attrs:{\"id\":\"summernote_content\",\"name\":\"content\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn btn-success float-right\"},[_c('i',{staticClass:\"fas fa-paper-plane mr-2\"}),_vm._v(\" Send\\n            \")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"d-flex flex-column min-vh-100\">\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-6\">\r\n          <h2 class=\"card-title mb-0\">Promotions</h2>\r\n        </div>\r\n        <div class=\"col-md-6\"></div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-10 mt-5\">\r\n          <form id=\"myForm\" name=\"myForm\" @submit.prevent=\"sendEmail()\">\r\n            <!-- <div class=\"form-group\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-sm btn-success\"\r\n                @click=\"selectCustomer()\"\r\n              >Select Customer Email</button>\r\n            </div>-->\r\n\r\n            <div class=\"form-group mb-3\">\r\n              <label class=\"font-weight-bold\">Send To</label>\r\n              <br />\r\n              <div class=\"form-check form-check-inline\">\r\n                <input\r\n                  v-model=\"sendto\"\r\n                  class=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  name=\"sendto\"\r\n                  value=\"all\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"inlineRadio1\">All Members</label>\r\n              </div>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input\r\n                  v-model=\"sendto\"\r\n                  class=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  name=\"sendto\"\r\n                  value=\"sunclubmembers\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"inlineRadio2\">Sun Club Members</label>\r\n              </div>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input\r\n                  v-model=\"sendto\"\r\n                  class=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  name=\"sendto\"\r\n                  value=\"wholesalers\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"inlineRadio2\">Wholesalers</label>\r\n              </div>\r\n              <!-- <div class=\"form-check form-check-inline\">\r\n                <input\r\n                  v-model=\"sendto\"\r\n                  class=\"form-check-input\"\r\n                  type=\"sendto\"\r\n                  name=\"sendto\"\r\n                  value=\"specific\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"inlineRadio2\">Specific</label>\r\n              </div>-->\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"font-weight-bold\">Subject</label>\r\n              <input v-model=\"subject\" name=\"subject\" type=\"text\" class=\"form-control\" />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"font-weight-bold\">Content:</label>\r\n              <textarea id=\"summernote_content\" name=\"content\"></textarea>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"font-weight-bold\">Select Products to promote:</label>\r\n              <br />\r\n              <div v-if=\"selectedProducts.length == 0\" class=\"text-center\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-lg btn-info\"\r\n                  @click=\"selectProducts()\"\r\n                >Select Products to Promote</button>\r\n              </div>\r\n              <div v-if=\"selectedProducts.length != 0\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-sm btn-info\"\r\n                  @click=\"selectProducts()\"\r\n                >Select More</button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"w-100\">\r\n              <div class=\"d-flex flex-wrap\">\r\n                <div\r\n                  v-for=\"(item, index) in selectedProducts\"\r\n                  :key=\"index\"\r\n                  class=\"d-flex flex-row mt-3 w-50\"\r\n                >\r\n                  <div class=\"mr-2\">\r\n                    <img\r\n                      :src=\"item.image_link\"\r\n                      style=\"width: 100px; height: 100px; object-fit: cover;\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"w-50\">\r\n                    <h6>\r\n                      <b>{{item.name}}</b>\r\n                      <button\r\n                        type=\"button\"\r\n                        class=\"btn-edit float-right text-danger\"\r\n                        @click=\"removeSelectedProduct(item)\"\r\n                      >\r\n                        <i class=\"fas fa-times-circle\"></i>\r\n                      </button>\r\n                    </h6>\r\n                    <!-- <span style=\"font-size:10px;\">({{item.sku}})</span> -->\r\n                    <div>price: {{item.price}}</div>\r\n                    <div>sunclub price: {{item.member_price}}</div>\r\n                    <div>wholesale price: {{item.wholesale_price}}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <button class=\"btn btn-success float-right\">\r\n                <i class=\"fas fa-paper-plane mr-2\"></i> Send\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <admin-select-products-modal-3\r\n      ref=\"select_products_modal\"\r\n      :selected_products=\"selectedProducts\"\r\n    ></admin-select-products-modal-3>\r\n  </div>\r\n</template>\r\n<script>\r\n// import summernote from \"../../plugin/summernote-bs4.min.js\";\r\nimport Errors from \"../../errorClass\";\r\n\r\nexport default {\r\n  props: [\"propemail\"],\r\n  data() {\r\n    return {\r\n      email: null,\r\n      subject: null,\r\n      myHTML: \"\",\r\n      errors: new Errors(),\r\n      sendto: \"all\",\r\n      subject: \"Sunfarmacy Promotions\",\r\n      content:\r\n        '<h2 style=\"text-align:center\"> Sunfarmacy Promotions </h2> <br> ',\r\n      selectedProducts: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.email = this.propemail;\r\n  },\r\n\r\n  mounted() {\r\n    let self = this;\r\n    $(document).ready(function () {\r\n      $(\"#summernote_content\").summernote({\r\n        placeholder: \"Content here\",\r\n        tabsize: 2,\r\n        toolbar: [\r\n          [\"style\", [\"style\"]],\r\n          [\"font\", [\"bold\", \"underline\", \"clear\"]],\r\n          [\"color\", [\"color\"]],\r\n          [\"para\", [\"ul\", \"ol\", \"paragraph\"]],\r\n          [\"table\", [\"table\"]],\r\n          [\"insert\", [\"link\", \"picture\", \"video\"]],\r\n          [\"view\", [\"fullscreen\", \"codeview\", \"help\"]],\r\n        ],\r\n        // default value is ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6']\r\n        styleTags: [\"p\", \"blockquote\", \"pre\", \"h2\", \"h3\", \"h4\", \"h5\"],\r\n      });\r\n\r\n      var markupStr = self.content;\r\n      $(\"#summernote_content\").summernote(\"code\", markupStr);\r\n    });\r\n  },\r\n  methods: {\r\n    addSelectedProduct(data) {\r\n      this.selectedProducts.push(data);\r\n    },\r\n    selectProducts() {\r\n      $(\"#selectProductsModal3\").modal(\"show\");\r\n    },\r\n    sendEmail() {\r\n      LoadingOverlay();\r\n      //   LoadingOverlayHide();\r\n      //   let msg = [\"Work In Progress\"];\r\n      //   this.showErrorMessage(msg);\r\n      //   window.scrollTo(0, 0);\r\n\r\n      //   LoadingOverlayHide();\r\n\r\n      let myForm = document.getElementById(\"myForm\");\r\n      let formData = new FormData(myForm);\r\n      formData.append(\"products\", JSON.stringify(this.selectedProducts));\r\n\r\n      //   let myForm = document.getElementById(\"myForm\");\r\n      //   let formData = new FormData(myForm);\r\n      //   //   formData.append(\"content\", this.myHTML);\r\n\r\n      axios\r\n        .post(\"/admin/sendPromotions\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.showSuccessMessage(res.data);\r\n          LoadingOverlayHide();\r\n          window.scrollTo(0, 0);\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n          this.errors.record(err.response.data.errors);\r\n          this.showErrorMessage(this.errors.getArrayOfMessages());\r\n          window.scrollTo(0, 0);\r\n          LoadingOverlayHide();\r\n        });\r\n    },\r\n\r\n    showErrorMessage(errors) {\r\n      //   console.log(shit);\r\n      this.$events.fire(\"showErrorMessage\", errors);\r\n    },\r\n\r\n    removeSelectedProduct(data) {\r\n      this.$refs.select_products_modal.products.forEach((product) => {\r\n        if (product.id == data.id) {\r\n          product.selected = false;\r\n        }\r\n      });\r\n\r\n      this.selectedProducts.splice(\r\n        this.selectedProducts.findIndex(function (i) {\r\n          return i.id === data.id;\r\n        }),\r\n        1\r\n      );\r\n    },\r\n\r\n    showSuccessMessage(msg) {\r\n      //   console.log(shit);\r\n      this.$events.fire(\"showSuccessMessage\", msg);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.btn-edit {\r\n  background: transparent;\r\n  border: 0px;\r\n  color: gray;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=46603d8f&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46603d8f\",\n  null\n  \n)\n\nexport default component.exports","export default class Errors {\n    constructor() {\n        this.errors = {};\n    }\n\n    get(field) {\n        // console.log(\"getting this field\" + field)\n        if (this.errors[field]) {\n            return this.errors[field][0];\n        }\n    }\n\n    record(errors) {\n        this.errors = errors;\n    }\n\n    clear(field) {\n        delete this.errors[field];\n    }\n\n    has(field) {\n        return this.errors.hasOwnProperty(field);\n    }\n\n    getAllMessages() {\n        let str = \"\";\n        if (Object.keys(this.errors).length > 0 == true) {\n            const keys = Object.keys(this.errors);\n            for (const key of keys) {\n                str = str + this.get(key);\n                +\", \";\n            }\n        }\n        return str;\n    }\n\n    getArrayOfMessages() {\n        let arr = [];\n        if (Object.keys(this.errors).length > 0 == true) {\n            const keys = Object.keys(this.errors);\n            for (const key of keys) {\n                // let obj = {\n                //   msg: this.get(key),\n                // };\n                arr.push(this.get(key));\n            }\n        }\n        return arr;\n    }\n\n    any() {\n        return Object.keys(this.errors).length > 0;\n    }\n}\n","import mod from \"-!../../../../../node_modules/style-loader/index.js!../../../../../node_modules/css-loader/index.js??ref--5-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/style-loader/index.js!../../../../../node_modules/css-loader/index.js??ref--5-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=46603d8f&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.btn-edit[data-v-46603d8f] {\\r\\n  background: transparent;\\r\\n  border: 0px;\\r\\n  color: gray;\\r\\n  font-size: 20px;\\n}\\r\\n\", \"\"]);\n\n// exports\n"],"sourceRoot":""}