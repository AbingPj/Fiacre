(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"Q+iO":function(t,s,a){var e=a("aFu/");"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(e,i);e.locals&&(t.exports=e.locals)},RLux:function(t,s,a){"use strict";var e=a("Q+iO");a.n(e).a},"aFu/":function(t,s,a){(t.exports=a("I1BE")(!1)).push([t.i,".list-edit-bg-color[data-v-ae006c5e] {\n  background: #ffe1e6;\n}\n.qty-input[data-v-ae006c5e] {\n  border: none;\n  border-bottom: 2px solid black;\n  width: 50px;\n  padding: 0px;\n  margin: 0px;\n}\n.btn-success-2[data-v-ae006c5e] {\n  color: gray !important;\n  background-color: rgba(51, 159, 37, 0.3) !important;\n  border-color: rgba(51, 159, 37, 0.5) !important;\n}\n.status-awaiting[data-v-ae006c5e] {\n  line-height: 1.5;\n  color: #4dbd74 !important;\n}\n.status-hold[data-v-ae006c5e] {\n  line-height: 1.5;\n  color: #ffc107 !important;\n}\n.status-ready[data-v-ae006c5e] {\n  line-height: 1.5;\n  color: #17a2b8 !important;\n}",""])},n0eG:function(t,s,a){"use strict";a.r(s);var e={props:["propsorder","propsproducts","propsuser","action"],data:function(){return{order:{},user:{},products:[],edited:!1,selectedStatus:3,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}},methods:{displayNumberWithComma:function(t){var s=parseFloat(t).toFixed(2);return Number(s).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},edit:function(t){console.log(t),t.editing=!0},saved:function(t){t.editing=!1,this.edited=!0},getProducts:function(){var t=this.propsproducts;t.forEach((function(t){t.editing=!1})),this.products=t},selectedStatusChange:function(){this.edited=!0},onlyNumber:function(t){var s=t.keyCode?t.keyCode:t.which;(s<48||s>57)&&t.preventDefault()},print:function(){var t=this;LoadingOverlay(),axios({method:"post",url:"/admin/generate/pdf/order",data:{order_id:this.order.id},responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(s){var a=window.URL.createObjectURL(new Blob([s.data])),e=document.createElement("a");e.href=a,e.setAttribute("download","orders_no_"+t.order.id+".pdf"),document.body.appendChild(e),e.click(),LoadingOverlayHide()})).catch((function(t){return console.log(t)}))}},created:function(){this.order=this.propsorder,this.user=this.propsuser,this.getProducts(),this.selectedStatus=this.order.status},computed:{totalAmount:function(){if(0==this.products.length)return 0;var t=0;return this.products.forEach((function(s){t+=s.price*s.updated_quantity})),t},getDiscount:function(){return this.totalAmount*(this.order.discount_percentage/100)},getCouponDiscount:function(){return this.order.atr_coupon_discount},getTax:function(){if(0==this.products.length)return 0;var t=0;return this.products.forEach((function(s){t+=s.tax_amount*s.updated_quantity})),t},OverAllTotal:function(){var t=0;return t=this.totalAmount-this.getDiscount,t-=this.getCouponDiscount,t+=parseFloat(this.order.delivery_fee),t+=parseFloat(this.getTax)}}},i=(a("RLux"),a("KHd+")),r=Object(i.a)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("form",{attrs:{action:t.action,method:"post",enctype:"multipart/form-data"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"order_id"},domProps:{value:t.order.id}}),t._v(" "),a("div",{staticClass:"d-flex flex-column min-vh-100"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[t._m(0),t._v(" "),a("br"),t._v(" "),a("h3",{staticClass:"text-success"},[a("b",[t._v("Order #"+t._s(t.order.id))]),t._v(" "),a("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:function(s){return t.print()}}},[a("i",{staticClass:"fas fa-print"}),t._v(" Print\n            ")])])])]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto w-50"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputEmail3"}},[t._v("Status:")]),t._v(" "),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedStatus,expression:"selectedStatus"}],staticClass:"form-control w-50",class:2==t.selectedStatus?"status-awaiting":"status-hold",staticStyle:{"font-weight":"800"},attrs:{name:"status",id:"exampleFormControlSelect1"},on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedStatus=s.target.multiple?a:a[0]},t.selectedStatusChange]}},[a("option",{attrs:{value:"1"}},[t._v("Reserved")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Ready")])])])])]),t._v(" "),a("div",{staticClass:"text-right w-50"},[a("h5",[t._v(t._s(t.order.date_label))])])])]),t._v(" "),a("div",{staticClass:"col-sm-12 mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto w-50"},[a("h3",[t._v("\n                Place by:\n                "),a("b",[t._v(t._s(t.user.full_name))]),t._v(" "),0==t.order.order_by?a("span",[t._v("(Retailer)")]):t._e(),t._v(" "),2==t.user.customer_role?a("span",[t._v("(Sun Club Member)")]):t._e(),t._v(" "),3==t.user.customer_role?a("span",[t._v("(Wholesaler)")]):t._e()])]),t._v(" "),a("div",{staticClass:"text-right w-50"},[a("h3",[t._v("Total: $"+t._s(t.displayNumberWithComma(t.OverAllTotal)))])])])]),t._v(" "),a("div",{staticClass:"col-sm-12 mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto w-50 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("Email")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.email))])]),t._v(" "),a("div",{staticClass:"w-50 border-bottom border-secondary pb-0 ml-3"},[a("label",{staticClass:"mb-0"},[t._v("Address")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.street_address))])])])]),t._v(" "),a("div",{staticClass:"col-sm-12 mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto w-25 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("Phone")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v("[ "+t._s(t.user.contact_number_type)+" ] "+t._s(t.user.contact_number))])]),t._v(" "),a("div",{staticClass:"w-50 ml-3"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("City")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.city))])]),t._v(" "),a("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("State")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.state))])]),t._v(" "),a("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("Zip Code")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.zipcode))])])])])])]),t._v(" "),a("div",{staticClass:"col-sm-12 mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto w-25 border-bottom border-secondary pb-0"},[a("label",{staticClass:"mb-0"},[t._v("Expected Delivery Date")]),t._v(" "),a("h5",{staticClass:"mb-0"},[t._v(t._s(t.order.atr_expected_delivery_date))])])])])]),t._v(" "),a("div",{staticClass:"row mt-5 mb-5"},[a("div",{staticClass:"col-12"},[a("ul",{staticClass:"list-group rounded-0"},t._l(t.products,(function(s,e){return a("li",{key:e,staticClass:"list-group-item d-flex",class:1==s.editing?"list-edit-bg-color":""},[a("div",[a("img",{staticStyle:{width:"50px",height:"50px","object-fit":"cover"},attrs:{src:s.product.image_link}})]),t._v(" "),a("div",{staticClass:"w-25 ml-3"},[a("p",[a("b",[t._v(t._s(s.product.name))]),t._v(" "),a("br"),t._v("\n                  $ "+t._s(t.displayNumberWithComma(s.price))+" / "+t._s(s.product.unit)+"\n                ")])]),t._v(" "),a("div",{staticClass:"ml-auto w-25"},[a("div",{staticClass:"d-flex justify-content-end align-items-end",staticStyle:{height:"57px"}},[a("div",{staticClass:"w-50 text-right"},[a("div",[a("b",[t._v("\n                        $ "+t._s(t.displayNumberWithComma(s.price))+" x\n                        "),t._v(" "),a("span",{class:0==s.editing?"":"d-none"},[t._v(t._s(s.updated_quantity))])]),t._v(" "),a("span",{class:1==s.editing?"":"d-none"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.updated_quantity,expression:"item.updated_quantity"}],staticClass:"qty-input",attrs:{name:"product["+s.id+"]",type:"text"},domProps:{value:s.updated_quantity},on:{keypress:t.onlyNumber,input:function(a){a.target.composing||t.$set(s,"updated_quantity",a.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"pl-3 text-right"},[a("a",{staticClass:"btn btn-sm btn-light",class:0==s.editing?"d-block":"d-none",on:{click:function(a){return t.edit(s)}}},[a("i",{staticClass:"fas fa-pencil-alt mr-1"}),t._v("Edit\n                    ")]),t._v(" "),a("a",{staticClass:"btn btn-sm btn-light",class:1==s.editing?"d-block":"d-none",on:{click:function(a){return t.saved(s)}}},[a("i",{staticClass:"far fa-save mr-1"}),t._v("Save\n                    ")])])])])])})),0),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h4",[a("span",{staticClass:"mr-5"},[t._v("Total:")]),t._v("\n              $"+t._s(t.displayNumberWithComma(t.totalAmount))+"\n            ")])]),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h4",[a("span",{staticClass:"mr-5"},[t._v("Discount:")]),t._v("\n              - $"+t._s(t.displayNumberWithComma(t.getDiscount))+"\n            ")])]),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h4",[a("span",{staticClass:"mr-5"},[t._v("Coupon Discount:")]),t._v("\n              - $"+t._s(t.displayNumberWithComma(t.getCouponDiscount))+"\n            ")])]),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h4",[a("span",{staticClass:"mr-5"},[t._v("Delivery Fee:")]),t._v("\n              + $"+t._s(t.displayNumberWithComma(t.order.delivery_fee))+"\n            ")])]),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h4",[a("span",{staticClass:"mr-5"},[t._v("TAX:")]),t._v("\n              + $"+t._s(t.displayNumberWithComma(t.getTax))+"\n            ")])]),t._v(" "),a("div",{staticClass:"text-right w-100"},[a("h3",[a("button",{staticClass:"rounded-0 mr-2 btn",class:1==t.edited?"btn-success":"btn-success-1",attrs:{disabled:0==t.edited,type:"submit"}},[a("i",{staticClass:"fas fa-save"}),t._v(" Save\n              ")]),t._v("\n              Total:\n              "),a("b",[t._v("$"+t._s(t.displayNumberWithComma(t.OverAllTotal)))])])])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{staticClass:"card-title mb-0"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"mr-2"},[s("a",{staticClass:"btn btn-success float-right rounded-0 text-light",attrs:{href:"/admin/orders"}},[s("i",{staticClass:"fas fa-chevron-circle-left"})])]),this._v(" "),s("div",[this._v("Orders")])])])}],!1,null,"ae006c5e",null);s.default=r.exports}}]);
//# sourceMappingURL=OrderShow.js.map