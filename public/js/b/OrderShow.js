/*! For license information please see OrderShow.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AOwy:function(t,e,r){(t.exports=r("I1BE")(!1)).push([t.i,".list-edit-bg-color[data-v-76271aa2] {\n  background: #ffe1e6;\n}\n.qty-input[data-v-76271aa2] {\n  border: none;\n  border-bottom: 2px solid black;\n  width: 50px;\n  padding: 0px;\n  margin: 0px;\n}\n.btn-success-2[data-v-76271aa2] {\n  color: gray !important;\n  background-color: rgba(51, 159, 37, 0.3) !important;\n  border-color: rgba(51, 159, 37, 0.5) !important;\n}\n.status-awaiting[data-v-76271aa2] {\n  line-height: 1.5;\n  color: #4dbd74 !important;\n}\n.status-hold[data-v-76271aa2] {\n  line-height: 1.5;\n  color: #ffc107 !important;\n}\n.status-ready[data-v-76271aa2] {\n  line-height: 1.5;\n  color: #17a2b8 !important;\n}",""])},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},JEAp:function(t,e,r){var s,a=a||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,r=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in s,i=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},d=function(t){setTimeout((function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,u){u||(e=c(e));var _,p=this,v="application/octet-stream"===e.type,m=function(){!function(t,e,r){for(var s=(e=[].concat(e)).length;s--;){var a=t["on"+e[s]];if("function"==typeof a)try{a.call(t,r||t)}catch(t){n(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,a)return _=r().createObjectURL(e),void setTimeout((function(){var t,e;s.href=_,s.download=l,t=s,e=new MouseEvent("click"),t.dispatchEvent(e),m(),d(_),p.readyState=p.DONE}));!function(){if((o||v&&i)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=o?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,m()},s.readAsDataURL(e),void(p.readyState=p.INIT)}(_||(_=r().createObjectURL(e)),v)?t.location.href=_:t.open(_,"_blank")||(t.location.href=_);p.readyState=p.DONE,m(),d(_)}()},u=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e,r){return new l(t,e||t.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=a:null!==r("B9Yq")&&null!==r("PDX0")&&(void 0===(s=function(){return a}.call(e,r,e,t))||(t.exports=s))},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},T5mW:function(t,e,r){"use strict";var s=r("XkRz");r.n(s).a},XkRz:function(t,e,r){var s=r("AOwy");"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(s,a);s.locals&&(t.exports=s.locals)},n0eG:function(t,e,r){"use strict";r.r(e);r("JEAp");var s={props:["propsorder","propsproducts","propsuser","action"],data:function(){return{order:{},user:{},products:[],edited:!1,selectedStatus:3,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),json_fields:{"Product Name":"product_name",Details:"price_details","":"x",Qty:"qty","*":"sign",Total:"sub_total"}}},methods:{displayNumberWithComma:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},edit:function(t){console.log(t),t.editing=!0},saved:function(t){t.editing=!1,this.edited=!0},getProducts:function(){var t=this.propsproducts;t.forEach((function(t){t.editing=!1})),this.products=t},selectedStatusChange:function(){this.edited=!0},onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&t.preventDefault()},print:function(){var t=this;LoadingOverlay(),axios({method:"post",url:"/admin/generate/pdf/order",data:{order_id:this.order.id},responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(e){var r=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=r,s.setAttribute("download","orders_no_"+t.order.id+".pdf"),document.body.appendChild(s),s.click(),LoadingOverlayHide()})).catch((function(t){return console.log(t)}))}},created:function(){this.order=this.propsorder,this.user=this.propsuser,this.getProducts(),this.selectedStatus=this.order.status},computed:{OrAddress:function(){var t;return"1"==this.order.is_pickup?(t=(t=this.order.order_address_info.address_pickup).replace(/,/g,"."),"Pickup Address: ".concat(t)):(t=(t=this.order.order_address_info.address).replace(/,/g,"."),"Delivery Address: ".concat(t))},OrDate:function(){if("1"==this.order.is_pickup)return"Pickup date: ".concat(this.order.order_address_info.pick_up_date);var t=this.order.atr_expected_delivery_date;return t=t.replace(/,/g,""),"Expected Delivery Date: ".concat(t)},productsCSV:function(){var t=this,e=[];return this.products.forEach((function(r){var s="",a="";1==r.is_subscription&&(s="$ ".concat(t.displayNumberWithComma(r.price),"/").concat(r.product.unit),a="".concat(r.subscription_weeks," weeks")),0==r.is_subscription&&(s="$ ".concat(t.displayNumberWithComma(r.price),"/").concat(r.product.unit),a="".concat(r.updated_quantity));var i="";1==r.is_subscription&&(i=t.displayNumberWithComma(r.subscription_price)),0==r.is_subscription&&(i=t.displayNumberWithComma(r.price*r.updated_quantity));var o={product_name:r.product.name,price_details:s,sub_total:i,unit:r.product.unit,x:"  X  ",sign:"$",quantity:r.updated_quantity,qty:a};e.push(o)})),e},totalAmount:function(){if(0==this.products.length)return 0;var t=0;return this.products.forEach((function(e){t+=e.price*e.updated_quantity})),t},getDiscount:function(){return this.totalAmount*(this.order.discount_percentage/100)},getCouponDiscount:function(){return this.order.atr_coupon_discount},getTax:function(){if(0==this.products.length)return 0;var t=0;return this.products.forEach((function(e){t+=e.tax_amount*e.updated_quantity})),t},OverAllTotal:function(){var t=0;return t=this.totalAmount-this.getDiscount,t-=this.getCouponDiscount,t+=parseFloat(this.order.delivery_fee),t+=parseFloat(this.getTax)}}},a=(r("T5mW"),r("KHd+")),i=Object(a.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{attrs:{action:t.action,method:"post",enctype:"multipart/form-data"}},[r("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"order_id"},domProps:{value:t.order.id}}),t._v(" "),r("div",{staticClass:"d-flex flex-column min-vh-100"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[t._m(0),t._v(" "),r("br"),t._v(" "),r("h3",{staticClass:"text-success"},[r("b",[t._v("Order #"+t._s(t.order.id))]),t._v(" "),r("download-excel",{staticClass:"btn btn-success float-right mx-1",attrs:{footer:["Sub-total:    "+t.order.atr_subscription_total_amount_f,"Tax: "+t.order.billing_type+"("+t.order.billing_type_percentage+") +    "+t.order.atr_billing_amount_f,"Referral discount: -     "+t.order.atr_referral_amount_f,"Delivey Fee: -     "+t.order.delivery_fee,"Total:     "+t.order.atr_subscription_overall_total_amount_f,"-","Customer: "+t.user.full_name,"School/Parish: "+t.order.organization.org_name,"-",""+t.OrAddress,""+t.OrDate,"-"],header:["Order ID:"+t.order.id,"Order Date: "+t.order.date_label],fields:t.json_fields,data:t.productsCSV,type:"xls",name:"order"+t.order.id+".xls",worksheet:"Order #"+t.order.id}},[r("i",{staticClass:"fas fa-file-excel"}),t._v("\n\t\t\t\t\t\t\t\tXLS\n\t\t\t\t\t\t\t")]),t._v(" "),r("download-excel",{staticClass:"btn btn-success float-right mx-1",attrs:{footer:["Sub-Total:,,,,, "+t.order.atr_subscription_total_amount_f,"Tax: "+t.order.billing_type+"("+t.order.billing_type_percentage+"%) + ,,,,, "+t.order.atr_billing_amount_f,"Referral Discount: - ,,,,,  "+t.order.atr_referral_amount_f,"Delivery Fee: - ,,,,,  "+t.order.delivery_fee,"Total: ,,,,,"+t.order.atr_subscription_overall_total_amount_f,"-","Customer: "+t.user.full_name,"School/Parish: "+t.order.organization.org_name,"-",""+t.OrAddress,""+t.OrDate,"-"],header:["Order ID:"+t.order.id,"Order Date: "+t.order.date_label],fields:t.json_fields,data:t.productsCSV,type:"csv",name:"order"+t.order.id+".xls",worksheet:"Order #"+t.order.id}},[r("i",{staticClass:"fas fa-file-csv"}),t._v("\n\t\t\t\t\t\t\t\tCSV\n\t\t\t\t\t\t\t")]),t._v(" "),r("button",{staticClass:"btn btn-success float-right mx-1",attrs:{type:"button"},on:{click:function(e){return t.print()}}},[r("i",{staticClass:"fas fa-print"}),t._v(" Print\n\t\t\t\t\t\t\t")])],1)])]),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 mb-3"},[r("div",{staticClass:"d-flex"},[t._m(1),t._v(" "),r("div",{staticClass:"text-right w-50"},[r("h5",[t._v(t._s(t.order.date_label))])])])]),t._v(" "),r("div",{staticClass:"col-sm-12 mb-3"},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"mr-auto w-50"},[r("h3",[t._v("\n\t\t\t\t\t\t\t\t\tPlace by:\n\t\t\t\t\t\t\t\t\t"),r("b",[t._v(t._s(t.user.full_name))]),t._v(" "),0==t.order.order_by?r("span",[t._v("(Retailer)")]):t._e(),t._v(" "),2==t.user.customer_role?r("span",[t._v("(Sun Club Member)")]):t._e(),t._v(" "),3==t.user.customer_role?r("span",[t._v("(Wholesaler)")]):t._e()])]),t._v(" "),r("div",{staticClass:"text-right w-50"},[r("h3",[t._v("\n\t\t\t\t\t\t\t\t\tTotal: $"+t._s(t.order.atr_subscription_overall_total_amount_f)+"\n\t\t\t\t\t\t\t\t")])])])]),t._v(" "),r("div",{staticClass:"col-sm-12 mb-3"},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"mr-auto w-50 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("Email")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.email))])]),t._v(" "),r("div",{staticClass:"w-50 border-bottom border-secondary pb-0 ml-3"},[r("label",{staticClass:"mb-0"},[t._v("Address")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.street_address))])])])]),t._v(" "),r("div",{staticClass:"col-sm-12 mb-3"},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"mr-auto w-25 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("Phone")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v("\n\t\t\t\t\t\t\t\t\t[ "+t._s(t.user.contact_number_type)+" ]\n\t\t\t\t\t\t\t\t\t"+t._s(t.user.contact_number)+"\n\t\t\t\t\t\t\t\t")])]),t._v(" "),r("div",{staticClass:"w-50 ml-3"},[r("div",{staticClass:"d-flex justify-content-between"},[r("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("City")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.city))])]),t._v(" "),r("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("State")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.state))])]),t._v(" "),r("div",{staticClass:"w-25 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("Zip Code")]),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v(t._s(t.user.zipcode))])])])])])]),t._v(" "),r("div",{staticClass:"col-sm-12 mb-3"},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"mr-auto w-50 border-bottom border-secondary pb-0"},[r("label",{staticClass:"mb-0"},[t._v("Organization")]),t._v(" "),r("p",{staticClass:"mb-0"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.order.organization.org_name)+"\n\t\t\t\t\t\t\t\t\t"),r("br"),t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.order.organization.atr_address)+"\n\t\t\t\t\t\t\t\t")])])])])]),t._v(" "),r("div",{staticClass:"row mt-5 mb-5"},[r("div",{staticClass:"col-12"},[r("ul",{staticClass:"list-group rounded-0"},t._l(t.products,(function(e,s){return r("li",{key:s,staticClass:"list-group-item d-flex",class:1==e.editing?"list-edit-bg-color":""},[r("div",[r("img",{staticStyle:{width:"50px",height:"50px","object-fit":"cover"},attrs:{src:e.product.image_link}})]),t._v(" "),r("div",{staticClass:"w-25 ml-3"},[r("p",[r("b",[t._v(t._s(e.product.name))]),t._v(" "),r("br"),t._v(" "),1==e.is_subscription?r("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t$ "+t._s(t.displayNumberWithComma(e.price))+" /\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.product.unit)+"\n\t\t\t\t\t\t\t\t\t\t\t"),r("span",{staticClass:"mr-3 ml-3"},[t._v("X")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.subscription_weeks)+" weeks\n\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),0==e.is_subscription?r("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t$ "+t._s(t.displayNumberWithComma(e.price))+" /\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.product.unit)+"\n\t\t\t\t\t\t\t\t\t\t\t"),r("span",{staticClass:"mr-3 ml-3"},[t._v("X")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.updated_quantity)+"\n\t\t\t\t\t\t\t\t\t\t")]):t._e()])]),t._v(" "),r("div",{staticClass:"ml-auto w-25"},[r("div",{staticClass:"d-flex justify-content-end align-items-end",staticStyle:{height:"57px"}},[1==e.is_subscription?r("div",{staticClass:"w-50 text-right"},[r("div",[r("b",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t$\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.displayNumberWithComma(e.subscription_price))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])]):t._e(),t._v(" "),0==e.is_subscription?r("div",{staticClass:"w-50 text-right"},[r("div",[r("b",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t$\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.displayNumberWithComma(e.price*e.updated_quantity))+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])]):t._e(),t._v(" "),r("div",{staticClass:"pl-3 text-right"})])])])})),0),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("div",{staticClass:"text-right w-100"},[r("h4",[r("span",{staticClass:"mr-5"},[t._v("Total:")]),t._v("\n\t\t\t\t\t\t\t\t$"+t._s(t.order.atr_subscription_total_amount_f)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),r("div",{staticClass:"text-right w-100"},[r("h4",[r("span",{staticClass:"mr-5"},[t._v(t._s(t.order.billing_type)+" ("+t._s(t.order.billing_type_percentage)+"\n\t\t\t\t\t\t\t\t\t%) +")]),t._v("\n\t\t\t\t\t\t\t\t$"+t._s(t.order.atr_billing_amount_f)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),r("div",{staticClass:"text-right w-100"},[r("h4",[r("span",{staticClass:"mr-5"},[t._v("Referral Discount- ")]),t._v("\n\t\t\t\t\t\t\t\t$"+t._s(t.order.atr_referral_amount_f)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),r("div",{staticClass:"text-right w-100"},[r("h4",[r("span",{staticClass:"mr-5"},[t._v("Delivery Fee:")]),t._v("\n                + $"+t._s(t.displayNumberWithComma(t.order.delivery_fee))+"\n              ")])]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"text-right w-100"},[r("h3",[r("span",{staticClass:"mr-5"},[t._v("Total:")]),t._v(" "),r("b",[t._v("$"+t._s(t.order.atr_subscription_overall_total_amount_f))])])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"card-title mb-0"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"mr-2"},[e("a",{staticClass:"btn btn-success float-right rounded-0 text-light",attrs:{href:"/admin/orders"}},[e("i",{staticClass:"fas fa-chevron-circle-left"})])]),this._v(" "),e("div",[this._v("Orders")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mr-auto w-50"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputEmail3"}},[this._v(":")])])])}],!1,null,"76271aa2",null);e.default=i.exports}}]);
//# sourceMappingURL=OrderShow.js.map