(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{j0Az:function(t,e,s){"use strict";function r(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}s.d(e,"a",(function(){return a}));var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,s,a;return e=t,(s=[{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(t){delete this.errors[t]}},{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"getAllMessages",value:function(){var t="";if(Object.keys(this.errors).length>0==1)for(var e=0,s=Object.keys(this.errors);e<s.length;e++){var r=s[e];t+=this.get(r)}return t}},{key:"getArrayOfMessages",value:function(){var t=[];if(Object.keys(this.errors).length>0==1)for(var e=0,s=Object.keys(this.errors);e<s.length;e++){var r=s[e];t.push(this.get(r))}return t}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&r(e.prototype,s),a&&r(e,a),t}()},kynQ:function(t,e,s){"use strict";var r=s("z26B");s.n(r).a},"q/Eq":function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".form-group[data-v-2576f0fa] {\n  margin-bottom: 2rem;\n}\n.input-group-text[data-v-2576f0fa] {\n  background: #d9dfe2;\n}\n.text-success[data-v-2576f0fa] {\n  color: #339f25 !important;\n}\n.btn-success-1[data-v-2576f0fa] {\n  color: #fff !important;\n  background-color: #339f25 !important;\n  border-color: #339f25 !important;\n}\n.btn-upload[data-v-2576f0fa] {\n  margin-right: 10px;\n}\n.btn-upload i[data-v-2576f0fa] {\n  font-size: 50px;\n}\n.btn-success-2[data-v-2576f0fa] {\n  color: gray !important;\n  background-color: rgba(51, 159, 37, 0.3) !important;\n  border-color: rgba(51, 159, 37, 0.5) !important;\n}\n#preview img[data-v-2576f0fa] {\n  width: 110px;\n  height: 90px;\n  object-fit: cover;\n}",""])},qCoC:function(t,e,s){"use strict";s.r(e);var r=s("j0Az"),a={props:["propsproduct","propscategories","propsselectedproducts"],data:function(){return{product:{},categories:{},selectedCategory:null,url:null,selectedProducts:[],feedback:"",errors_old:{},errors:new r.a,subcategories:[],selectedSubCategory:null,selectedCategoryName2:""}},created:function(){this.categories=this.propscategories,this.product=this.propsproduct,this.url=this.product.image_link,this.selectedCategory=this.propsproduct.category_id,this.selectedProducts=this.propsselectedproducts,this.selectedCategory&&this.categorySelectionChange(!0)},methods:{categorySelectionChange:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];axios.get("/api/admin/subcategory/"+this.selectedCategory).then((function(s){t.subcategories=s.data.sub_categories,t.selectedCategoryName2=s.data.category.name,t.selectedSubCategory=e?t.product.sub_category_id:null})).catch((function(t){console.error(t)}))},archive:function(){this.$refs.archive_modal.product=this.product,$("#archiveModal").modal("show")},save:function(){var t=this;if(this.selectedProducts.length<1){this.showErrorMessage(["Please Select Products to Bundle"]),window.scrollTo(0,0)}else{var e=document.getElementById("myForm"),s=new FormData(e);s.append("selected_products",JSON.stringify(this.selectedProducts)),s.append("product_id",this.product.id),axios.post("/api/admin/update/bundle/product",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),window.location.href=t.data})).catch((function(e){t.errors.record(e.response.data.errors),t.showErrorMessage(t.errors.getArrayOfMessages()),window.scrollTo(0,0)}))}},showErrorMessage:function(t){this.$events.fire("showErrorMessage",t)},onFileChange:function(t){var e=t.target.files[0];this.product.image_file=e,this.url=URL.createObjectURL(e)},preview:function(){this.$refs.preview_modal.product=this.product,this.$refs.preview_modal.preview_image=null==this.url?"/img/no-product-image.png":this.url,this.$refs.preview_modal.category=null==this.selectedCategory?"":this.selectedCategoryName,$("#previewModal").modal("show")},updateVisible:function(t){t.is_visible=!t.is_visible},onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&46!==e&&t.preventDefault()},selectProductsModal:function(){$("#selectProductsModal").modal("show")},addSelectedProduct:function(t){this.selectedProducts.push(t)},removeSelectedProduct:function(t){this.$refs.select_products_modal.products.forEach((function(e){e.id==t.id&&(e.selected=!1,e.qty=1)})),this.selectedProducts.splice(this.selectedProducts.findIndex((function(e){return e.id===t.id})),1)},displayNumberWithComma:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}},computed:{selectedCategoryName:function(){var t=this;return this.propscategories.find((function(e){return e.id===t.selectedCategory})).name},totalPrice:function(){if(0==this.selectedProducts.length)return 0;var t=0;return this.selectedProducts.forEach((function(e){t+=e.price*e.qty})),t},discount:function(){var t=0;return t=this.totalPrice*(this.product.bundle_percentage/100),t},overAllTotal:function(){return this.totalPrice-this.discount},totalPriceMember:function(){if(0==this.selectedProducts.length)return 0;var t=0;return this.selectedProducts.forEach((function(e){t+=e.member_price*e.qty})),t},discountMember:function(){return this.totalPriceMember*(this.product.bundle_percentage/100)},overAllTotalMember:function(){return this.totalPriceMember-this.discountMember},totalPriceWholesaler:function(){if(0==this.selectedProducts.length)return 0;var t=0;return this.selectedProducts.forEach((function(e){t+=e.wholesale_price*e.qty})),t},discountWholesaler:function(){return this.totalPriceWholesaler*(this.product.bundle_percentage/100)},overAllTotalWholesaler:function(){return this.totalPriceWholesaler-this.discountWholesaler}}},o=(s("kynQ"),s("KHd+")),i=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{id:"myForm",name:"myForm"},on:{submit:function(e){return e.preventDefault(),t.save()}}},[s("div",{staticClass:"d-flex flex-column min-vh-100"},[s("div",{staticClass:"container"},[t._m(0),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7 col-sm-12 p-2 m-2 border"},[s("div",{staticClass:"d-flex"},[s("div",[s("button",{staticClass:"btn btn-success btn-upload",attrs:{type:"button"},on:{click:function(e){return t.$refs.image_file_input.click()}}},[s("i",{staticClass:"fas fa-camera-retro"}),t._v(" "),s("br"),t._v("Upload Image\n                  ")]),t._v(" "),s("input",{ref:"image_file_input",staticClass:"d-none",attrs:{type:"file",name:"image_file"},on:{change:t.onFileChange}})]),t._v(" "),s("div",[s("div",{attrs:{id:"preview"}},[t.url?s("img",{attrs:{src:t.url}}):t._e()])])])])]),t._v(" "),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Add A Product")]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return t.selectProductsModal()}}},[t._v("Select Product")])])])])]),t._v(" "),s("div",{staticClass:"row mt-3"},[s("label",{attrs:{for:"season"}},[t._v("Included Products:")]),t._v(" "),s("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),s("tbody",t._l(t.selectedProducts,(function(e,r){return s("tr",{key:r},[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[s("img",{staticStyle:{width:"50px",height:"50px","object-fit":"cover"},attrs:{src:e.image_link}})]),t._v(" "),s("td",[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.qty,expression:"item.qty"}],staticClass:"form-control",domProps:{value:e.qty},on:{keypress:t.onlyNumber,input:function(s){s.target.composing||t.$set(e,"qty",s.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v(t._s(e.unit))])])])]),t._v(" "),s("td",[s("span",{staticClass:"font-italic",staticStyle:{"font-size":"10px"}},[t._v("( "+t._s(e.qty)+" x "+t._s(e.price)+" )")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(e.price*e.qty)))])]),t._v(" "),s("td",[s("span",{staticClass:"font-italic",staticStyle:{"font-size":"10px"}},[t._v("( "+t._s(e.qty)+" x "+t._s(e.member_price)+" )")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(e.member_price*e.qty)))])]),t._v(" "),s("td",[s("span",{staticClass:"font-italic",staticStyle:{"font-size":"10px"}},[t._v("( "+t._s(e.qty)+" x "+t._s(e.wholesale_price)+" )")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(e.wholesale_price*e.qty)))])]),t._v(" "),s("th",{staticStyle:{width:"50px"}},[s("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(s){return t.removeSelectedProduct(e)}}},[s("i",{staticClass:"far fa-times-circle"})])])])})),0),t._v(" "),s("tfoot",[s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Total")]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.totalPrice)))]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.totalPriceMember)))]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.totalPriceWholesaler)))]),t._v(" "),s("th")]),t._v(" "),s("tr",[s("th",{attrs:{colspan:"3"}},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend",staticStyle:{padding:"5px"}},[t._v("Discount Percentage:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.bundle_percentage,expression:"product.bundle_percentage"}],staticClass:"form-control",attrs:{name:"discount_percentage",type:"text","aria-label":"Amount (to the nearest dollar)"},domProps:{value:t.product.bundle_percentage},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.product,"bundle_percentage",e.target.value)}}}),t._v(" "),t._m(2)])]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.discount)))]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.discountMember)))]),t._v(" "),s("th",{staticClass:"text-right"},[t._v(t._s(t.displayNumberWithComma(t.discountWholesaler)))]),t._v(" "),s("th")]),t._v(" "),s("tr",[s("th",{attrs:{colspan:"3"}},[t._v("Bundle Price")]),t._v(" "),s("th",{staticClass:"text-right"},[s("div",{staticClass:"input-group"},[t._m(3),t._v(" "),s("input",{staticClass:"form-control text-right",attrs:{type:"text",readonly:""},domProps:{value:t.displayNumberWithComma(t.overAllTotal)}})])]),t._v(" "),s("th",{staticClass:"text-right"},[s("div",{staticClass:"input-group"},[t._m(4),t._v(" "),s("input",{staticClass:"form-control text-right",attrs:{type:"text",readonly:""},domProps:{value:t.displayNumberWithComma(t.overAllTotalMember)}})])]),t._v(" "),s("th",{staticClass:"text-right"},[s("div",{staticClass:"input-group"},[t._m(5),t._v(" "),s("input",{staticClass:"form-control text-right",attrs:{type:"text",readonly:""},domProps:{value:t.displayNumberWithComma(t.overAllTotalWholesaler)}})])]),t._v(" "),s("th")])])]),t._v(" "),s("label",{staticClass:"text-danger"},[t._v("Note: The Prices of Bundle Products are base on the selected products so you must to create product first. If a selected product price is updated, the prices of bundle are also updated. But oredered bundle products prices cant be change anymore.")])]),t._v(" "),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control rounded-0",attrs:{id:"name",name:"name",type:"text",placeholder:"Product Bundle Name"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control rounded-0",attrs:{id:"description",name:"description",rows:"6"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sku"}},[t._v("SKU")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sku,expression:"product.sku"}],staticClass:"form-control rounded-0",attrs:{id:"sku",name:"sku",type:"text",placeholder:'ex. "PA0001", "1A0002"'},domProps:{value:t.product.sku},on:{input:function(e){e.target.composing||t.$set(t.product,"sku",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"unit"}},[t._v("Unit")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.unit,expression:"product.unit"}],staticClass:"form-control rounded-0",attrs:{id:"unit",name:"unit",type:"text",placeholder:'ex. "Pack", "Kilo", "Pc", "12oz", "Doz" ...'},domProps:{value:t.product.unit},on:{input:function(e){e.target.composing||t.$set(t.product,"unit",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"category"}},[t._v("Category")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory,expression:"selectedCategory"}],staticClass:"form-control",attrs:{id:"category",name:"category"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedCategory=e.target.multiple?s:s[0]},function(e){return t.categorySelectionChange()}]}},[s("option",{attrs:{value:"null",disabled:""}},[t._v("Select Category")]),t._v(" "),t._l(t.propscategories,(function(e,r){return s("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"category"}},[t._v("Sub Categories of "+t._s(t.selectedCategoryName2))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSubCategory,expression:"selectedSubCategory"}],staticClass:"form-control",attrs:{id:"sub_category",name:"sub_category"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedSubCategory=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"null",disabled:""}},[t._v("Select Sub Category")]),t._v(" "),t._l(t.subcategories,(function(e,r){return s("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"tags"}},[t._v("Tags")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.tags,expression:"product.tags"}],staticClass:"form-control rounded-0",attrs:{id:"tags",name:"tags",type:"text",placeholder:'ex. "Fresh", "Red", "Green", "Citrus", ... ',disabled:""},domProps:{value:t.product.tags},on:{input:function(e){e.target.composing||t.$set(t.product,"tags",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"season"}},[t._v("Season")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.season,expression:"product.season"}],staticClass:"form-control rounded-0",attrs:{id:"season",name:"season",type:"text",placeholder:'ex. "Winter", "Summer", "Spring", ...'},domProps:{value:t.product.season},on:{input:function(e){e.target.composing||t.$set(t.product,"season",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"minorder"}},[t._v("Minimum Order")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.minorder,expression:"product.minorder"}],staticClass:"form-control rounded-0",attrs:{id:"minorder",name:"minorder",type:"text",placeholder:'ex. "1"',disabled:""},domProps:{value:t.product.minorder},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.product,"minorder",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"maxorder"}},[t._v("Maximum Order")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.maxorder,expression:"product.maxorder"}],staticClass:"form-control rounded-0",attrs:{id:"maxorder",name:"maxorder",type:"text",placeholder:'ex. "100"',disabled:""},domProps:{value:t.product.maxorder},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.product,"maxorder",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"maxorder"}},[t._v("Visibility")]),t._v(" "),s("div",{staticClass:"custom-control custom-switch",on:{click:function(e){return t.updateVisible(t.product)}}},[s("input",{staticClass:"custom-control-input bg-success",attrs:{type:"checkbox",id:"visible",name:"visible"},domProps:{checked:1==t.product.is_visible}}),t._v(" "),s("label",{staticClass:"custom-control-label"},[t._v(t._s(1==t.product.is_visible?"show":"hide"))])])])]),t._v(" "),s("div",{staticClass:"col-sm-12"},[s("a",{staticClass:"mr-2 btn btn-success-1 rounded-0",on:{click:function(e){return t.preview()}}},[s("i",{staticClass:"far fa-eye"}),t._v(" Preview\n              ")]),t._v(" "),t._m(6),t._v(" "),s("a",{staticClass:"rounded-0 mr-2 btn btn-success-2",on:{click:function(e){return t.archive()}}},[s("i",{staticClass:"fas fa-archive"}),t._v(" Archive\n              ")])])])])])]),t._v(" "),s("admin-products-preview-modal",{ref:"preview_modal"}),t._v(" "),s("admin-select-products-modal",{ref:"select_products_modal",attrs:{selected_products:t.selectedProducts}}),t._v(" "),s("admin-products-archive-modal",{ref:"archive_modal"})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("h2",{staticClass:"card-title mb-0"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"mr-2"},[e("a",{staticClass:"btn btn-success float-right rounded-0 text-light",attrs:{href:"/admin/products"}},[e("i",{staticClass:"fas fa-chevron-circle-left"})])]),this._v(" "),e("div",[this._v("Products")])])]),this._v(" "),e("br"),this._v(" "),e("h3",{staticClass:"text-success"},[e("b",[this._v("BUNDLE PRODUCT INFORMATION")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Product")]),t._v(" "),s("th",{staticStyle:{width:"75px"}},[t._v("Image")]),t._v(" "),s("th",{staticStyle:{width:"120px"}},[t._v("Quantity")]),t._v(" "),s("th",{staticStyle:{width:"170px"}},[t._v("Regular Price")]),t._v(" "),s("th",{staticStyle:{width:"170px"}},[t._v("Member Price")]),t._v(" "),s("th",{staticStyle:{width:"170px"}},[t._v("Wholesale Price")]),t._v(" "),s("th",{staticStyle:{width:"50px"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[this._v("%")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("$")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("$")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("$")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"mr-2 btn btn-success-2 rounded-0"},[e("i",{staticClass:"fas fa-save"}),this._v(" Save\n              ")])}],!1,null,"2576f0fa",null);e.default=i.exports},z26B:function(t,e,s){var r=s("q/Eq");"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(r,a);r.locals&&(t.exports=r.locals)}}]);
//# sourceMappingURL=ProdBunEdit.js.map