(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"8irs":function(e,t,s){var a=s("NDDm");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(e.exports=a.locals)},Dk3b:function(e,t,s){"use strict";s.r(t);var a=s("j0Az"),n={data:function(){return{markers:[],map:{},zone:{zone_name:"",address:"",lat:"",lng:""},errors:new a.a,timer:null,googleAPIKEY:"AIzaSyD-aqJby-P72dOO5xNfOI3X2EjAPffOQbc"}},created:function(){this.loadScript()},methods:{saveDeliveryZone:function(){var e=this;LoadingOverlay(),axios.post("/admin/delivery-zones/save",this.zone).then((function(e){window.location.href="/admin/delivery-zones"})).catch((function(t){console.error(t),e.errors.record(t.response.data.errors),e.showErrorMessage(e.errors.getArrayOfMessages()),window.scrollTo(0,0),LoadingOverlayHide()}))},showErrorMessage:function(e){this.$events.fire("showErrorMessage",e)},initMap:function(){var e=this;this.map=new google.maps.Map(document.getElementById("map"),{zoom:4,center:{lat:37.09024,lng:-95.712891}}),this.map.addListener("click",(function(t){e.zone.lat=t.latLng.lat(),e.zone.lng=t.latLng.lng(),e.addMarker(t.latLng),e.getGeocodingReverse(e.zone.lat+","+e.zone.lng)}))},addMarker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!=this.markers.length)for(var s=0;s<this.markers.length;s++)this.markers[s].setMap(null);var a=this,n=new google.maps.Marker({position:e,map:a.map});this.markers.push(n),t&&this.map.setZoom(t),this.map.panTo(e)},selectZone:function(e,t){this.zone.lat=e,this.zone.lng=t;var s={lat:e,lng:t};this.addMarker(s,14)},getLatLong:function(){var e=this,t={address:this.zone.address,key:this.googleAPIKEY};$.get("https://maps.googleapis.com/maps/api/geocode/json",t,(function(t){var s=t.results[0].geometry.location.lat,a=t.results[0].geometry.location.lng;e.zone.address=t.results[0].formatted_address,e.selectZone(s,a)})).fail((function(){console.log("error")}))},getGeocodingReverse:function(e){var t=this,s={latlng:e,key:this.googleAPIKEY};$.get("https://maps.googleapis.com/maps/api/geocode/json",s,(function(e){t.zone.address=e.results[0].formatted_address})).fail((function(){console.log("error")}))},getLatLong2:function(){var e=this,t={q:this.zone.address,key:"4f3f49ebea4488",format:"json"};$.get("https://us1.locationiq.com/v1/search.php",t,(function(t){var s=Number(t[0].lat),a=Number(t[0].lon);e.selectZone(s,a)})).fail((function(){console.log("error")}))},loadScript:function(){if(window.google&&window.google.maps)this.initMap();else{var e=this,t=document.createElement("script");t.onload=function(){window.google||window.google.maps?e.initMap():console.error("no google maps script included")},t.async=!0,t.defer=!0,t.src="https://maps.googleapis.com/maps/api/js?key="+this.googleAPIKEY+"&libraries=geometry",document.getElementsByTagName("head")[0].appendChild(t)}}}},o=(s("YYJb"),s("KHd+")),r=Object(o.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[e._m(0),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8 p-3"},[s("div",{staticClass:"col-12 mb-2"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Name:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.zone.zone_name,expression:"zone.zone_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Zone Name"},domProps:{value:e.zone.zone_name},on:{input:function(t){t.target.composing||e.$set(e.zone,"zone_name",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[e._v("Address:")]),e._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.zone.address,expression:"zone.address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Zone Address"},domProps:{value:e.zone.address},on:{input:function(t){t.target.composing||e.$set(e.zone,"address",t.target.value)}}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:"Get mark on the map"},on:{click:function(t){return e.getLatLong()}}},[s("i",{staticClass:"fas fa-map-marker-alt",staticStyle:{"font-size":"17px"}})])])])])]),e._v(" "),s("div",{staticClass:"col-12",staticStyle:{height:"300px"}},[s("label",[e._v("Set Marker:")]),e._v(" "),s("div",{attrs:{id:"map"}}),e._v(" "),s("br"),e._v(" "),s("button",{staticClass:"btn btn-success float-right",attrs:{type:"button "},on:{click:function(t){return e.saveDeliveryZone()}}},[e._v("Add Zone")])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-6"},[t("h3",{staticClass:"card-title mb-0"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"mr-2"},[t("a",{staticClass:"btn btn-success float-right rounded-0 text-light",attrs:{href:"/admin/delivery-zones"}},[t("i",{staticClass:"fas fa-chevron-circle-left"})])]),this._v(" "),t("div",[this._v("Add Delivery Zone")])])])])])}],!1,null,"788d07bc",null);t.default=r.exports},NDDm:function(e,t,s){(e.exports=s("I1BE")(!1)).push([e.i,"/* Always set the map height explicitly to define the size of the div\n         * element that contains the map. */\n#map[data-v-788d07bc] {\n  height: 100%;\n}\n\n/* Optional: Makes the sample page fill the window. */\nhtml[data-v-788d07bc],\nbody[data-v-788d07bc] {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}",""])},YYJb:function(e,t,s){"use strict";var a=s("8irs");s.n(a).a},j0Az:function(e,t,s){"use strict";function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}s.d(t,"a",(function(){return n}));var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,s,n;return t=e,(s=[{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){delete this.errors[e]}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"getAllMessages",value:function(){var e="";if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var a=s[t];e+=this.get(a)}return e}},{key:"getArrayOfMessages",value:function(){var e=[];if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var a=s[t];e.push(this.get(a))}return e}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&a(t.prototype,s),n&&a(t,n),e}()}}]);
//# sourceMappingURL=ZonDelAdd.js.map