(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{HM8v:function(e,t,s){(e.exports=s("I1BE")(!1)).push([e.i,"/* Always set the map height explicitly to define the size of the div\n         * element that contains the map. */\n#map[data-v-9d64fbba] {\n  height: 100%;\n}\n\n/* Optional: Makes the sample page fill the window. */\nhtml[data-v-9d64fbba],\nbody[data-v-9d64fbba] {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}",""])},YKGD:function(e,t,s){"use strict";s.r(t);var n=s("j0Az"),o={props:["propszone"],data:function(){return{markers:[],map:{},zone:{id:"",zone_name:"",address:"",lat:"",lng:""},timer:null,errors:new n.a,googleAPIKEY:"AIzaSyD-aqJby-P72dOO5xNfOI3X2EjAPffOQbc"}},created:function(){this.loadScript()},methods:{updatePickupZone:function(){var e=this;LoadingOverlay(),axios.post("/admin/pickup-zones/update",this.zone).then((function(e){window.location.href="/admin/pickup-zones"})).catch((function(t){console.error(t),e.errors.record(t.response.data.errors),e.showErrorMessage(e.errors.getArrayOfMessages()),window.scrollTo(0,0),LoadingOverlayHide()}))},showErrorMessage:function(e){this.$events.fire("showErrorMessage",e)},initMap:function(){var e=this;this.zone.id=this.propszone.id,this.zone.zone_name=this.propszone.zone_name,this.zone.address=this.propszone.address,this.zone.lat=this.propszone.lat,this.zone.lng=this.propszone.lng;this.map=new google.maps.Map(document.getElementById("map"),{zoom:4,center:{lat:37.09024,lng:-95.712891}});var t={lat:this.zone.lat,lng:this.zone.lng};this.addMarker(t,14),this.map.addListener("click",(function(t){e.zone.lat=t.latLng.lat(),e.zone.lng=t.latLng.lng(),e.addMarker(t.latLng),e.getGeocodingReverse(e.zone.lat+","+e.zone.lng)}))},addMarker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!=this.markers.length)for(var s=0;s<this.markers.length;s++)this.markers[s].setMap(null);var n=this,o=new google.maps.Marker({position:e,map:n.map});this.markers.push(o),t&&this.map.setZoom(t),this.map.panTo(e)},selectZone:function(e,t){this.zone.lat=e,this.zone.lng=t;var s={lat:e,lng:t};this.addMarker(s,14)},getLatLong:function(){var e=this,t={address:this.zone.address,key:this.googleAPIKEY};$.get("https://maps.googleapis.com/maps/api/geocode/json",t,(function(t){var s=t.results[0].geometry.location.lat,n=t.results[0].geometry.location.lng;e.zone.address=t.results[0].formatted_address,e.selectZone(s,n)})).fail((function(){console.log("error")}))},getGeocodingReverse:function(e){var t=this,s={latlng:e,key:this.googleAPIKEY};$.get("https://maps.googleapis.com/maps/api/geocode/json",s,(function(e){t.zone.address=e.results[0].formatted_address})).fail((function(){console.log("error")}))},getLatLong2:function(){var e=this,t={q:this.zone.address,key:"4f3f49ebea4488",format:"json"};$.get("https://us1.locationiq.com/v1/search.php",t,(function(t){var s=Number(t[0].lat),n=Number(t[0].lon);e.selectZone(s,n)})).fail((function(){console.log("error")}))},loadScript:function(){if(window.google&&window.google.maps)this.initMap();else{var e=this,t=document.createElement("script");t.onload=function(){window.google||window.google.maps?e.initMap():console.error("no google maps script included")},t.async=!0,t.defer=!0,t.src="https://maps.googleapis.com/maps/api/js?key="+this.googleAPIKEY+"&libraries=geometry",document.getElementsByTagName("head")[0].appendChild(t)}}}},a=(s("dTR0"),s("KHd+")),r=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[e._m(0),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8 p-3"},[s("div",{staticClass:"col-12 mb-2"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Name:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.zone.zone_name,expression:"zone.zone_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Zone Name"},domProps:{value:e.zone.zone_name},on:{input:function(t){t.target.composing||e.$set(e.zone,"zone_name",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[e._v("Address:")]),e._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.zone.address,expression:"zone.address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Zone Address"},domProps:{value:e.zone.address},on:{input:function(t){t.target.composing||e.$set(e.zone,"address",t.target.value)}}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button","data-toggle":"tooltip","data-placement":"top",title:"Get mark on the map"},on:{click:function(t){return e.getLatLong()}}},[s("i",{staticClass:"fas fa-map-marker-alt",staticStyle:{"font-size":"17px"}})])])])])]),e._v(" "),s("div",{staticClass:"col-12",staticStyle:{height:"300px"}},[s("label",[e._v("Set Marker:")]),e._v(" "),s("div",{attrs:{id:"map"}}),e._v(" "),s("br"),e._v(" "),s("button",{staticClass:"btn btn-success float-right",attrs:{type:"button "},on:{click:function(t){return e.updatePickupZone()}}},[e._v("Update Zone")])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row mb-3"},[t("div",{staticClass:"col-md-6"},[t("h3",{staticClass:"card-title mb-0"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"mr-2"},[t("a",{staticClass:"btn btn-success float-right rounded-0 text-light",attrs:{href:"/admin/pickup-zones"}},[t("i",{staticClass:"fas fa-chevron-circle-left"})])]),this._v(" "),t("div",[this._v("Edit Pick-up Zone")])])])])])}],!1,null,"9d64fbba",null);t.default=r.exports},dTR0:function(e,t,s){"use strict";var n=s("p3aW");s.n(n).a},j0Az:function(e,t,s){"use strict";function n(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,s,o;return t=e,(s=[{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){delete this.errors[e]}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"getAllMessages",value:function(){var e="";if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var n=s[t];e+=this.get(n)}return e}},{key:"getArrayOfMessages",value:function(){var e=[];if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var n=s[t];e.push(this.get(n))}return e}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&n(t.prototype,s),o&&n(t,o),e}()},p3aW:function(e,t,s){var n=s("HM8v");"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,o);n.locals&&(e.exports=n.locals)}}]);
//# sourceMappingURL=ZonPickEdit.js.map