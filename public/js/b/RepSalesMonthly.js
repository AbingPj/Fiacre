(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1lFu":function(t,a,e){"use strict";e.r(a);var s={created:function(){this.getData(),this.getOrganization()},data:function(){return{data:[],total:0,dateLabel:"",date:null,filter_date:null,options:{format:"MMMM YYYY",useCurrent:!0,allowInputToggle:!0,maxDate:moment()},json_fields:{Date:"date","Total Number of Orders":"total_orders","Total Number of Products Sold":"total_products",Sales:{field:"total_earnings",callback:function(t){return parseFloat(t).toFixed(2)}}},organization:[],selectedOrganizationId:null}},methods:{getOrganization:function(){var t=this;axios.get("/admin/api/data/getOrganization").then((function(a){t.organization=a.data})).catch((function(t){console.error(t)}))},getData:function(){var t=this;axios.post("/admin/api/reports/sales/monthly").then((function(a){t.total=a.data.total_earnings,t.data=a.data.data,t.dateLabel=a.data.date,t.date=a.data.date,t.filter_date=a.data.date})).catch((function(t){console.error(t)}))},filter:function(){var t=this;axios.post("/admin/api/reports/sales/monthly",{date:this.date}).then((function(a){t.total=a.data.total_earnings,t.data=a.data.data,t.dateLabel=a.data.date,t.date=a.data.date,t.filter_date=a.data.date})).catch((function(t){console.error(t)}))},print:function(){var t=this;axios({method:"post",url:"/admin/reports/generate/pdf/monthly",data:{date:this.filter_date},responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(a){var e=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","monthly "+t.filter_date+".pdf"),document.body.appendChild(s),s.click()})).catch((function(t){return console.log(t)}))},displayNumberWithComma:function(t){var a=parseFloat(t).toFixed(2);return Number(a).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}}},i=e("KHd+"),n=Object(i.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h3",[t._v("\r\n        "+t._s(t.dateLabel)+"\r\n        "),e("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:function(a){return t.print()}}},[e("i",{staticClass:"fas fa-print"}),t._v(" Print\r\n        ")]),t._v(" "),e("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Monthly Sales Report ("+t.dateLabel+")",fields:t.json_fields,data:t.data,type:"xls",name:"salesmonthly.xls",worksheet:"Monthly"}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("\r\n          XLS\r\n        ")]),t._v(" "),e("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Monthly Sales Report ("+t.dateLabel+")",fields:t.json_fields,data:t.data,type:"csv",name:"salesmonthly.csv",worksheet:"Monthly"}},[e("i",{staticClass:"fas fa-file-csv"}),t._v("\r\n          CSV\r\n        ")])],1)])]),t._v(" "),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"input-group"},[e("date-picker",{attrs:{id:"date-time-input",wrap:!0,config:t.options},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}}),t._v(" "),t._m(0)],1)]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.filter()}}},[e("i",{staticClass:"fas fa-filter"}),t._v(" Filter\r\n      ")])])]),t._v(" "),e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col-10"},[e("div",{staticStyle:{"min-height":"300px"}},[e("table",{staticClass:"table table-hover table-sm"},[t._m(1),t._v(" "),e("tbody",t._l(t.data,(function(a,s){return e("tr",{key:s},[e("th",[t._v(t._s(a.date))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(a.total_orders))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(a.total_products))]),t._v(" "),e("td",[e("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(a.total_earnings)))])])])})),0),t._v(" "),e("tfoot",[e("tr",[t._m(2),t._v(" "),e("th",{staticClass:"text-center"}),t._v(" "),e("th",{staticClass:"text-center"}),t._v(" "),e("th",[e("span",{staticClass:"float-right"},[e("b",[t._v("$ "+t._s(t.displayNumberWithComma(t.total)))])])])])])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary datepickerbutton",attrs:{type:"button",title:"Toggle"}},[a("i",{staticClass:"far fa-calendar"})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Date")]),this._v(" "),a("th",{staticClass:"text-center"},[this._v("Total No. Orders")]),this._v(" "),a("th",{staticClass:"text-center"},[this._v("Total No. Products Sold")]),this._v(" "),a("th",[a("span",{staticClass:"float-right"},[this._v("Sales")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("th",[a("b",[this._v("Total")])])}],!1,null,null,null);a.default=n.exports}}]);
//# sourceMappingURL=RepSalesMonthly.js.map