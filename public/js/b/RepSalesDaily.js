/*! For license information please see RepSalesDaily.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"2xvc":function(t,e,a){"use strict";a.r(e);a("JEAp");var n={created:function(){this.getData(),this.getOrganization()},data:function(){return{data:[],total:0,value:"",dateLabel:"",date:null,filter_date:null,options:{format:"MMMM DD, YYYY",useCurrent:!0,allowInputToggle:!0,maxDate:moment()},csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),json_fields:{Time:"time","Order #":"order_id","No. of Products Sold":"number_of_products",Sales:{field:"total_earnings",callback:function(t){return parseFloat(t).toFixed(2)}}},organization:[],selectedOrganizationId:null}},methods:{momento:function(){return moment().format("MMMM")},getOrganization:function(){var t=this;axios.get("/admin/api/data/getOrganization").then((function(e){t.organization=e.data})).catch((function(t){console.error(t)}))},getData:function(){var t=this;axios.post("/admin/api/reports/sales/daily").then((function(e){t.total=e.data.total_earnings,t.data=e.data.data,t.dateLabel=e.data.date,t.date=e.data.date,t.filter_date=e.data.date})).catch((function(t){console.error(t)}))},filter:function(){var t=this;axios.post("/admin/api/reports/sales/daily",{date:this.date}).then((function(e){t.total=e.data.total_earnings,t.data=e.data.data,t.dateLabel=e.data.date,t.date=e.data.date,t.filter_date=e.data.date})).catch((function(t){console.error(t)}))},print:function(){var t=this;axios({method:"post",url:"/admin/reports/generate/pdf/daily",data:{date:this.filter_date},responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","daily "+t.filter_date+".pdf"),document.body.appendChild(n),n.click()})).catch((function(t){return console.log(t)}))},displayNumberWithComma:function(t){var e=parseFloat(t).toFixed(2);return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}}},r=a("KHd+"),i=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("h3",[t._v("\r\n        "+t._s(t.dateLabel)+"\r\n        "),a("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:function(e){return t.print()}}},[a("i",{staticClass:"fas fa-print"}),t._v(" Print\r\n        ")]),t._v(" "),a("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Daily Sales Report ("+t.dateLabel.replace(/,/g,".")+")",fields:t.json_fields,data:t.data,type:"xls",name:"salesdaily.xls",worksheet:"Daily"}},[a("i",{staticClass:"fas fa-file-excel"}),t._v("\r\n          XLS\r\n        ")]),t._v(" "),a("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Daily Sales Report ("+t.dateLabel.replace(/,/g,".")+")",fields:t.json_fields,data:t.data,type:"csv",name:"salesdaily.csv",worksheet:"Daily"}},[a("i",{staticClass:"fas fa-file-csv"}),t._v("\r\n          CSV\r\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"input-group"},[a("date-picker",{attrs:{id:"date-time-input",wrap:!0,config:t.options},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),t._m(0)],1)]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.filter()}}},[a("i",{staticClass:"fas fa-filter"}),t._v(" Filter\r\n      ")])])]),t._v(" "),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-9"},[a("div",{staticStyle:{"min-height":"300px"}},[a("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),a("tbody",[0==t.data.length?a("tr",[a("td",{staticClass:"bg-secondary text-center",attrs:{colspan:"5"}},[t._v("No Orders yet for "+t._s(t.dateLabel))])]):t._e(),t._v(" "),t._l(t.data,(function(e,n){return a("tr",{key:n},[a("th",[t._v(t._s(e.time))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.order_id))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.number_of_products))]),t._v(" "),a("td",[a("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(e.total_earnings)))])]),t._v(" "),a("td",[a("a",{staticClass:"btn btn-sm btn-info",attrs:{href:"/admin/orders/"+e.order_id}},[t._v("Details")]),t._v(" "),a("a",{staticClass:"btn btn-sm btn-success text-light",attrs:{href:e.url_for_print}},[a("i",{staticClass:"fas fa-print"}),t._v(" Print\r\n                ")])])])}))],2),t._v(" "),a("tfoot",[a("tr",[t._m(2),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("span",{staticClass:"float-right"},[t._v("$ "+t._s(t.displayNumberWithComma(t.total)))])]),t._v(" "),a("th")])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-secondary datepickerbutton",attrs:{type:"button",title:"Toggle"}},[e("i",{staticClass:"far fa-calendar"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Time")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Order #")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("No. Products Sold")]),t._v(" "),a("th",[a("span",{staticClass:"float-right"},[t._v("Sales")])]),t._v(" "),a("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("b",[this._v("Total")])])}],!1,null,null,null);e.default=i.exports},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},JEAp:function(t,e,a){var n,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,a=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l=function(t){setTimeout((function(){"string"==typeof t?a().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},d=function(e,d,u){u||(e=c(e));var f,p=this,v="application/octet-stream"===e.type,m=function(){!function(t,e,a){for(var n=(e=[].concat(e)).length;n--;){var r=t["on"+e[n]];if("function"==typeof r)try{r.call(t,a||t)}catch(t){s(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return f=a().createObjectURL(e),void setTimeout((function(){var t,e;n.href=f,n.download=d,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),l(f),p.readyState=p.DONE}));!function(){if((o||v&&i)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,m()},n.readAsDataURL(e),void(p.readyState=p.INIT)}(f||(f=a().createObjectURL(e)),v)?t.location.href=f:t.open(f,"_blank")||(t.location.href=f);p.readyState=p.DONE,m(),l(f)}()},u=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,a){return e=e||t.name||"download",a||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e,a){return new d(t,e||t.name||"download",a)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=r:null!==a("B9Yq")&&null!==a("PDX0")&&(void 0===(n=function(){return r}.call(e,a,e,t))||(t.exports=n))},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})}}]);
//# sourceMappingURL=RepSalesDaily.js.map