(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{CSXl:function(e,t,s){var r=s("nmXo");"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(r,o);r.locals&&(e.exports=r.locals)},hquD:function(e,t,s){"use strict";s.r(t);var r=s("j0Az");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n={props:["propemail"],data:function(){var e;return o(e={email:null,subject:null,myHTML:"",errors:new r.a,sendto:"all"},"subject","Sunfarmacy Promotions"),o(e,"content",'<h2 style="text-align:center"> Sunfarmacy Promotions </h2> <br> '),o(e,"selectedProducts",[]),e},created:function(){this.email=this.propemail},mounted:function(){var e=this;$(document).ready((function(){$("#summernote_content").summernote({placeholder:"Content here",tabsize:2,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],styleTags:["p","blockquote","pre","h2","h3","h4","h5"]});var t=e.content;$("#summernote_content").summernote("code",t)}))},methods:{addSelectedProduct:function(e){this.selectedProducts.push(e)},selectProducts:function(){$("#selectProductsModal3").modal("show")},sendEmail:function(){var e=this;LoadingOverlay();var t=document.getElementById("myForm"),s=new FormData(t);s.append("products",JSON.stringify(this.selectedProducts)),axios.post("/admin/sendPromotions",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),e.showSuccessMessage(t.data),LoadingOverlayHide(),window.scrollTo(0,0)})).catch((function(t){console.error(t),e.errors.record(t.response.data.errors),e.showErrorMessage(e.errors.getArrayOfMessages()),window.scrollTo(0,0),LoadingOverlayHide()}))},showErrorMessage:function(e){this.$events.fire("showErrorMessage",e)},removeSelectedProduct:function(e){this.$refs.select_products_modal.products.forEach((function(t){t.id==e.id&&(t.selected=!1)})),this.selectedProducts.splice(this.selectedProducts.findIndex((function(t){return t.id===e.id})),1)},showSuccessMessage:function(e){this.$events.fire("showSuccessMessage",e)}}},a=(s("mkDB"),s("KHd+")),i=Object(a.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"d-flex flex-column min-vh-100"},[s("div",{staticClass:"container"},[e._m(0),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-10 mt-5"},[s("form",{attrs:{id:"myForm",name:"myForm"},on:{submit:function(t){return t.preventDefault(),e.sendEmail()}}},[s("div",{staticClass:"form-group mb-3"},[s("label",{staticClass:"font-weight-bold"},[e._v("Send To")]),e._v(" "),s("br"),e._v(" "),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sendto,expression:"sendto"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sendto",value:"all"},domProps:{checked:e._q(e.sendto,"all")},on:{change:function(t){e.sendto="all"}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("All Members")])]),e._v(" "),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sendto,expression:"sendto"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sendto",value:"sunclubmembers"},domProps:{checked:e._q(e.sendto,"sunclubmembers")},on:{change:function(t){e.sendto="sunclubmembers"}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("Sun Club Members")])]),e._v(" "),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sendto,expression:"sendto"}],staticClass:"form-check-input",attrs:{type:"radio",name:"sendto",value:"wholesalers"},domProps:{checked:e._q(e.sendto,"wholesalers")},on:{change:function(t){e.sendto="wholesalers"}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("Wholesalers")])])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"font-weight-bold"},[e._v("Subject")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"form-control",attrs:{name:"subject",type:"text"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}})]),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"font-weight-bold"},[e._v("Select Products to promote:")]),e._v(" "),s("br"),e._v(" "),0==e.selectedProducts.length?s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-lg btn-info",attrs:{type:"button"},on:{click:function(t){return e.selectProducts()}}},[e._v("Select Products to Promote")])]):e._e(),e._v(" "),0!=e.selectedProducts.length?s("div",[s("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"button"},on:{click:function(t){return e.selectProducts()}}},[e._v("Select More")])]):e._e()]),e._v(" "),s("div",{staticClass:"w-100"},[s("div",{staticClass:"d-flex flex-wrap"},e._l(e.selectedProducts,(function(t,r){return s("div",{key:r,staticClass:"d-flex flex-row mt-3 w-50"},[s("div",{staticClass:"mr-2"},[s("img",{staticStyle:{width:"100px",height:"100px","object-fit":"cover"},attrs:{src:t.image_link}})]),e._v(" "),s("div",{staticClass:"w-50"},[s("h6",[s("b",[e._v(e._s(t.name))]),e._v(" "),s("button",{staticClass:"btn-edit float-right text-danger",attrs:{type:"button"},on:{click:function(s){return e.removeSelectedProduct(t)}}},[s("i",{staticClass:"fas fa-times-circle"})])]),e._v(" "),s("div",[e._v("price: "+e._s(t.price))]),e._v(" "),s("div",[e._v("sunclub price: "+e._s(t.member_price))]),e._v(" "),s("div",[e._v("wholesale price: "+e._s(t.wholesale_price))])])])})),0)]),e._v(" "),e._m(2)])])])]),e._v(" "),s("admin-select-products-modal-3",{ref:"select_products_modal",attrs:{selected_products:e.selectedProducts}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("h2",{staticClass:"card-title mb-0"},[this._v("Promotions")])]),this._v(" "),t("div",{staticClass:"col-md-6"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("label",{staticClass:"font-weight-bold"},[this._v("Content:")]),this._v(" "),t("textarea",{attrs:{id:"summernote_content",name:"content"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-success float-right"},[t("i",{staticClass:"fas fa-paper-plane mr-2"}),this._v(" Send\n            ")])])}],!1,null,"46603d8f",null);t.default=i.exports},j0Az:function(e,t,s){"use strict";function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}s.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,s,o;return t=e,(s=[{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){delete this.errors[e]}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"getAllMessages",value:function(){var e="";if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var r=s[t];e+=this.get(r)}return e}},{key:"getArrayOfMessages",value:function(){var e=[];if(Object.keys(this.errors).length>0==1)for(var t=0,s=Object.keys(this.errors);t<s.length;t++){var r=s[t];e.push(this.get(r))}return e}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&r(t.prototype,s),o&&r(t,o),e}()},mkDB:function(e,t,s){"use strict";var r=s("CSXl");s.n(r).a},nmXo:function(e,t,s){(e.exports=s("I1BE")(!1)).push([e.i,"\n.btn-edit[data-v-46603d8f] {\r\n  background: transparent;\r\n  border: 0px;\r\n  color: gray;\r\n  font-size: 20px;\n}\r\n",""])}}]);
//# sourceMappingURL=Promotions.js.map