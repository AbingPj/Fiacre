(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{W7VO:function(t,a,e){"use strict";e.r(a);var s={created:function(){this.getData()},data:function(){return{data:[],total:0,yearLabel:"",year:null,filter_year:null,options:{format:"YYYY",useCurrent:!0,allowInputToggle:!0,maxDate:moment()},json_fields:{Month:"date","Total Number of Orders":"total_orders","Total Number of Products Sold":"total_products",Sales:{field:"total_earnings",callback:function(t){return parseFloat(t).toFixed(2)}}}}},methods:{getData:function(){var t=this;axios.post("/admin/api/reports/sales/yearly").then((function(a){t.total=a.data.total_earnings,t.data=a.data.data,t.yearLabel=a.data.year,t.year=a.data.year,t.filter_year=a.data.year})).catch((function(t){console.error(t)}))},filter:function(){var t=this;axios.post("/admin/api/reports/sales/yearly",{year:this.year}).then((function(a){t.total=a.data.total_earnings,t.data=a.data.data,t.yearLabel=a.data.year,t.year=a.data.year,t.filter_year=a.data.year})).catch((function(t){console.error(t)}))},print:function(){var t=this;axios({method:"post",url:"/admin/reports/generate/pdf/yearly",data:{date:this.filter_year},responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(a){var e=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","yearly "+t.filter_year+".pdf"),document.body.appendChild(s),s.click()})).catch((function(t){return console.log(t)}))},displayNumberWithComma:function(t){var a=parseFloat(t).toFixed(2);return Number(a).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}}},r=e("KHd+"),i=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h3",[t._v("\n        Year: "+t._s(t.yearLabel)+"\n        "),e("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:function(a){return t.print()}}},[e("i",{staticClass:"fas fa-print"}),t._v(" Print\n        ")]),t._v(" "),e("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Yearly Sales Report ("+t.yearLabel+")",fields:t.json_fields,data:t.data,type:"xls",name:"salesyearly.xls",worksheet:"Yearly"}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("\n          XLS\n        ")]),t._v(" "),e("download-excel",{staticClass:"btn btn-success float-right mr-2",attrs:{footer:["total: ",parseFloat(t.total).toFixed(2)],header:"Yearly Sales Report ("+t.yearLabel+")",fields:t.json_fields,data:t.data,type:"csv",name:"salesyearly.csv",worksheet:"Yearly"}},[e("i",{staticClass:"fas fa-file-csv"}),t._v("\n          CSV\n        ")])],1)])]),t._v(" "),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"input-group"},[e("date-picker",{attrs:{id:"date-time-input",wrap:!0,config:t.options},model:{value:t.year,callback:function(a){t.year=a},expression:"year"}}),t._v(" "),t._m(0)],1)]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.filter()}}},[e("i",{staticClass:"fas fa-filter"}),t._v(" Filter\n      ")])])]),t._v(" "),e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col-10"},[e("div",{staticStyle:{"min-height":"300px"}},[e("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),e("tbody",t._l(t.data,(function(a,s){return e("tr",{key:s},[e("th",[t._v(t._s(a.date))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(a.total_orders))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(a.total_products))]),t._v(" "),e("td",[e("span",{staticClass:"float-right"},[t._v(t._s(t.displayNumberWithComma(a.total_earnings)))])])])})),0),t._v(" "),e("tfoot",[e("tr",[e("th",[t._v("Total")]),t._v(" "),e("th",{staticClass:"text-center"}),t._v(" "),e("th",{staticClass:"text-center"}),t._v(" "),e("th",[e("span",{staticClass:"float-right"},[t._v("$ "+t._s(t.displayNumberWithComma(t.total)))])])])])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary datepickerbutton",attrs:{type:"button",title:"Toggle"}},[a("i",{staticClass:"far fa-calendar"})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Month")]),this._v(" "),a("th",{staticClass:"text-center"},[this._v("Total No. Orders")]),this._v(" "),a("th",{staticClass:"text-center"},[this._v("Total No. Products Sold")]),this._v(" "),a("th",[a("span",{staticClass:"float-right"},[this._v("Sales")])])])])}],!1,null,null,null);a.default=i.exports}}]);
//# sourceMappingURL=RepSalesYearly.js.map